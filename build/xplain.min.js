/*

 Copyright (c) 2015, Syuuhei Kuno
 All rights reserved.

 Redistribution and use in source and binary forms, with or without modification,
 are permitted provided that the following conditions are met:

  1. Redistributions of source code must retain the above copyright notice, this
     list of conditions and the following disclaimer.

  2. Redistributions in binary form must reproduce the above copyright notice,
     this list of conditions and the following disclaimer in the documentation
     and/or other materials provided with the distribution.

  3. Neither the name of the copyright holder nor the names of its contributors
     may be used to endorse or promote products derived from this software
     without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var $jscomp={scope:{},getGlobal:function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b}};$jscomp.global=$jscomp.getGlobal(this);$jscomp.initSymbol=function(){$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol);$jscomp.initSymbol=function(){}};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return"jscomp_symbol_"+b+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.iterator||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));$jscomp.initSymbolIterator=function(){}};
$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();if(b[$jscomp.global.Symbol.iterator])return b[$jscomp.global.Symbol.iterator]();if(!(b instanceof Array||"string"==typeof b||b instanceof String))throw new TypeError(b+" is not iterable");var a=0;return{next:function(){return a==b.length?{done:!0}:{done:!1,value:b[a++]}}}};$jscomp.arrayFromIterator=function(b){for(var a,g=[];!(a=b.next()).done;)g.push(a.value);return g};
$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};$jscomp.arrayFromArguments=function(b){for(var a=[],g=0;g<b.length;g++)a.push(b[g]);return a};
$jscomp.inherits=function(b,a){function g(){}g.prototype=a.prototype;b.prototype=new g;b.prototype.constructor=b;for(var c in a)if($jscomp.global.Object.defineProperties){var d=$jscomp.global.Object.getOwnPropertyDescriptor(a,c);void 0!==d&&$jscomp.global.Object.defineProperty(b,c,d)}else b[c]=a[c]};var xpl;"object"==typeof module?(xpl=module.exports,xpl.running_type="Node.js"):"object"==typeof exports?(xpl=exports,xpl.running_type="CommonJS"):xpl={running_type:"Direct Link"};
(function(b){Object.defineProperties(b,{RUNTYPE_NODE_JS:{value:"Node.js"},RUNTYPE_COMMON_JS:{value:"CommonJS"},RUNTYPE_DIRECT_LINK:{value:"Direct Link"}});b.about={};Object.defineProperties(b.about,{NAME:{value:"xPlain for JavaScript"},CODE_NAME:{value:"DEUS"},VERSION_CODE:{value:1},VERSION_NAME:{value:"0.9.0"},AUTHOR:{value:"Syuuhei Kuno"},COPYRIGHT:{value:"Copyright (c) 2015, Syuuhei Kuno All rights reserved."},LICENSE:{value:"http://opensource.org/licenses/BSD-3-Clause"},REPOSITORY:{value:"git@github.com:redlily/xplain_for_js.git"}});
b.getAbout=function(){return b.about.name+"\nVersion code: "+b.about.VERSION_CODE+"\nVersion name: "+b.about.VERSION_NAME+"\nAuthor:       "+b.about.AUTHOR+"\nCopyright:    "+b.about.COPYRIGHT+"\nLicense:      "+b.about.LICENSE+"\nRepository:   "+b.about.REPOSITORY};b.putAboutToStdout=function(){console.log(b.getAbout)};var a=new ArrayBuffer(8);b.size_t=function(a){return Number.parseInt.apply(null,arguments)};b.ptrdiff_t=function(a){return Number.parseInt.apply(null,arguments)};b.enum_t=function(a){return Number.parseInt.apply(null,
arguments)};b.int8_t=function(a){return Number.parseInt.apply(null,arguments)<<24>>24};Object.defineProperties(b.int8_t,{MIN_VALUE:{value:-Math.pow(2,7)},MAX_VALUE:{value:Math.pow(2,7)-1}});b.int16_t=function(a){return Number.parseInt.apply(null,arguments)<<16>>16};Object.defineProperties(b.int16_t,{MIN_VALUE:{value:-Math.pow(2,15)},MAX_VALUE:{value:Math.pow(2,15)-1}});b.int32_t=function(a){return Number.parseInt.apply(null,arguments)<<0>>0};Object.defineProperties(b.int32_t,{MIN_VALUE:{value:-Math.pow(2,
31)},MAX_VALUE:{value:Math.pow(2,31)-1}});b.float32_t=function(a){return Number.parseFloat.apply(null,arguments)};b.float32_t.hashCode=function(g){a.setFloat64(g);return a.getUnit32(0).toString(16)};b.float64_t=function(a){return Number.parseFloat.apply(null,arguments)};b.float64_t.hashCode=function(g){a.setFloat64(g);return a.getUnit32(0).toString(16)+a.getUnit32(1).toString(16)}})(xpl);(function(b){b.SystemUtils=function(){throw Error("Unsupported operation");};if("object"==typeof window){var a=null,g=null;"function"==typeof window.requestAnimationFrame?(a=window.requestAnimationFrame,g=window.cancelAnimationFrame):"function"==typeof window.mozRequestAnimationFrame?(a=window.mozRequestAnimationFrame,g=window.mozCancelAnimationFrame):"function"==typeof window.webkitRequestAnimationFrame?(a=function(a){var d=window.webkitRequestAnimationFrame(function(){d.__is_cancel||a()});return d},
g=function(a){a.__is_cancel=!0}):"Function"==typeof window.msRequestAnimationFrame?(a=function(a){var d=window.msRequestAnimationFrame(function(){d.__is_cancel||a()});return d},g=function(a){a.__is_cancel=!0}):(a=function(a){return setTimeout(a,2)},g=clearTimeout);b.SystemUtils.requestAnimationFrame=function(c){return a(c)};b.SystemUtils.cancelAnimationFrame=function(a){g(timer)}}"object"==typeof document&&(b.SystemUtils.isSupportedFullScreen=function(a){return null!=(a.requestFullscreen||a.mozRequestFullScreen||
a.webkitRequestFullscreen||a.msRequestFullscreen)},b.SystemUtils.requestFullScreen=function(a){if("function"==typeof a.requestFullscreen)a.requestFullscreen();else if("function"==typeof a.mozRequestFullScreen)a.mozRequestFullScreen();else if("function"==typeof a.webkitRequestFullscreen)a.webkitRequestFullscreen();else if("function"==typeof a.msRequestFullscreen)a.msRequestFullscreen();else return!1;return!0},b.SystemUtils.isFullScreen=function(){return window.innerWidth==screen.width&&window.innerHeight==
screen.height},b.SystemUtils.cancelFullScreen=function(){"function"==typeof document.exitFullscreen?document.exitFullscreen():"function"==typeof document.mozCancelFullScreen?document.mozCancelFullScreen():"function"==typeof document.webkitExitFullscreen?document.webkitExitFullscreen():"function"==typeof document.msExitFullscreen&&document.msExitFullscreen()})})(xpl);(function(b){b.MathUtils=function(){throw Error("Unsupported operation");};b.MathUtils.min=function(a,g,c){return a<g?a<c?a:c:g<c?g:c};b.MathUtils.mid=function(a,g,c){return a<g?g<c?g:c<a?a:c:a<c?a:c<g?g:c};b.MathUtils.max=function(a,g,c){return a<g?g<c?c:g:a<c?c:a};b.MathUtils.log=function(a,g){return Math.log(g)/Math.log(a)};b.MathUtils.cqrt=function(a){return 0<=a?Math.pow(a,1/3):-Math.pow(-a,1/3)};b.MathUtils.floorPow2=function(a){a=Math.floor(a);a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a|=a>>
32;return a^a>>1};b.MathUtils.cailPow2=function(a){a=Math.floor(a);--a;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;return(a|a>>32)+1}})(xpl);(function(b){b.ArrayUtils=function(){throw Error("Unsupported operation");};b.ArrayUtils.copy=function(a,g,c,d,b){for(var e=0;e<b;++e)c[d+e]=a[g+e]};b.ArrayUtils.fill=function(a,g,c,d){for(;g<c;++g)a[g]=d};b.ArrayUtils.binarySearch=function(a,g,c,d,b){for(c--;g<=c;){var e=g+c>>1,h=a[e],h=null!=b?b(h,d):h-d;if(0>h)g=e+1;else if(0<h)c=e-1;else return e}return-(g+1)};b.ArrayUtils.convertToSet=function(a,g,c,d){var b=[];a:for(;g<c;++g){for(var e=a[g],h=0;h<b.length;++h)if(null!=d?b[h]==e||d(b[h],e):b[h]==
e)continue a;b.push(e)}return b};b.ArrayUtils.isContained=function(a,g,c,d,b,e,h){if(c-g<e-b)return!1;a:for(;b<e;++b){for(var l=d[b],k=g;k<c;++k)if(null!=h?a[k]==l||h(a[k],l):a[k]==l)continue a;return!1}return!0}})(xpl);(function(b){b.StringUtils=function(){throw Error("Unsupported operation");};b.StringUtils.encodeUTF8=function(a){for(var g=[],c=0;c<a.length;++c){var d=a.charCodeAt(c);55296<=d&&57343>=d&&c<a.length-1&&(d=(d&1023)<<10|(a.charCodeAt(++c)&1023)+65536);128>d?g.push(d):2048>d?g.push(d>>6&31|192,d>>0&63|128):65536>d?g.push(d>>12&15|224,d>>6&63|128,d>>0&63|128):2097152>d?g.push(d>>18&7|240,d>>12&63|128,d>>6&63|128,d>>0&63|128):67108864>d?g.push(d>>24&3|248,d>>18&63|128,d>>12&63|128,d>>6&63|128,d>>0&63|
128):2147483648>d&&g.push(d>>30&1|252,d>>24&63|128,d>>18&63|128,d>>12&63|128,d>>6&63|128,d>>0&63|128)}return g};b.StringUtils.decodeUTF8=function(a){for(var g="",c=0;c<a.length;){var d=255&a[c],b=0;128>d?b=0:223>d?(d=(31&d)<<6,b=1):239>d?(d=(15&d)<<12,b=2):247>d?(d=(7&d)<<18,b=3):251>d?(d=(3&d)<<24,b=4):253>d&&(d=(1&d)<<30,b=5);for(c++;0<b&&c<a.length;){var e=a[c];if(128>e)break;d|=(63&e)<<6*--b;c++}g=55295>d||57344<=d&&65535>=d?g+String.fromCharCode(d):g+String.fromCharCode(55296|d-65536>>10&1023,
56320|d&1023)}return g}})(xpl);(function(b){b.Geometry=function(){throw Error("Unsupported operation");};Object.defineProperties(b.Geometry,{VX:{value:0},VY:{value:1},VZ:{value:2},VW:{value:3},SIZE_VECTOR_3:{value:3},CR:{value:0},CI:{value:1},CJ:{value:2},CK:{value:3},SIZE_QUATERNION:{value:4},M4X4_00:{value:0},M4X4_10:{value:1},M4X4_20:{value:2},M4X4_30:{value:3},M4X4_01:{value:4},M4X4_11:{value:5},M4X4_21:{value:6},M4X4_31:{value:7},M4X4_02:{value:8},M4X4_12:{value:9},M4X4_22:{value:10},M4X4_32:{value:11},M4X4_03:{value:12},
M4X4_13:{value:13},M4X4_23:{value:14},M4X4_33:{value:15},SIZE_MATRIX_4X4:{value:16}})})(xpl);(function(b){b.Matrix4x4=function(){throw Error("Unsupported operation");};b.Matrix4x4.load=function(a,g,c,d,b,e,h,l,k,m,n,p,q,r,t,v,u,y,w){void 0===w&&(w=!1);w?(a[g+0]=c,a[g+4]=h,a[g+8]=n,a[g+12]=t,a[g+1]=d,a[g+5]=l,a[g+9]=p,a[g+13]=v,a[g+2]=b,a[g+6]=k,a[g+10]=q,a[g+14]=u,a[g+3]=e,a[g+7]=m,a[g+11]=r):(a[g+0]=c,a[g+4]=d,a[g+8]=b,a[g+12]=e,a[g+1]=h,a[g+5]=l,a[g+9]=k,a[g+13]=m,a[g+2]=n,a[g+6]=p,a[g+10]=q,a[g+14]=r,a[g+3]=t,a[g+7]=v,a[g+11]=u);a[g+15]=y};b.Matrix4x4.loadv=function(a,g,c,d,f){b.Matrix4x4.load(a,
g,c[d+0],c[d+4],c[d+8],c[d+12],c[d+1],c[d+5],c[d+9],c[d+13],c[d+2],c[d+6],c[d+10],c[d+14],c[d+3],c[d+7],c[d+11],c[d+15],f)};b.Matrix4x4.loadZero=function(a,g){b.Matrix4x4.load(a,g,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,!1)};b.Matrix4x4.loadIdentity=function(a,g){b.Matrix4x4.load(a,g,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,!1)};b.Matrix4x4.lrepv=function(a,g,c,d,f,e,h){var l=1-h;b.Matrix4x4.load(a,g,c[d+0]*l+f[e+0]*h,c[d+4]*l+f[e+4]*h,c[d+8]*l+f[e+8]*h,c[d+12]*l+f[e+12]*h,c[d+1]*l+f[e+1]*h,c[d+5]*l+f[e+5]*h,c[d+
9]*l+f[e+9]*h,c[d+13]*l+f[e+13]*h,c[d+2]*l+f[e+2]*h,c[d+6]*l+f[e+6]*h,c[d+10]*l+f[e+10]*h,c[d+14]*l+f[e+14]*h,c[d+3]*l+f[e+3]*h,c[d+7]*l+f[e+7]*h,c[d+11]*l+f[e+11]*h,c[d+15]*l+f[e+15]*h,!1)};b.Matrix4x4.transposev=function(a,g,c,d){var b=c[d+4],e=c[d+8],h=c[d+12],l=c[d+1],k=c[d+5],m=c[d+9],n=c[d+13],p=c[d+2],q=c[d+6],r=c[d+10],t=c[d+14],v=c[d+3],u=c[d+7],y=c[d+11],w=c[d+15];a[g+0]=c[d+0];a[g+4]=l;a[g+8]=p;a[g+12]=v;a[g+1]=b;a[g+5]=k;a[g+9]=q;a[g+13]=u;a[g+2]=e;a[g+6]=m;a[g+10]=r;a[g+14]=y;a[g+3]=
h;a[g+7]=n;a[g+11]=t;a[g+15]=w};b.Matrix4x4.determinant=function(a,g){var c=a[g+1],d=a[g+5],b=a[g+9],e=a[g+13],h=a[g+2],l=a[g+6],k=a[g+10],m=a[g+14],n=a[g+3],p=a[g+7],q=a[g+11],r=a[g+15];return a[g+0]*(d*(k*r-m*q)+b*(m*p-l*r)+e*(l*q-k*p))+a[g+4]*(c*(m*q-k*r)+b*(h*r-m*n)+e*(k*n-h*q))+a[g+8]*(c*(l*r-m*p)+d*(m*n-h*r)+e*(h*p-l*n))+a[g+12]*(c*(k*p-l*q)+d*(h*q-k*n)+b*(l*n-h*p))};b.Matrix4x4.inversev=function(a,g,c,d){var f=c[d+0],e=c[d+4],h=c[d+8],l=c[d+12],k=c[d+1],m=c[d+5],n=c[d+9],p=c[d+13],q=c[d+2],
r=c[d+6],t=c[d+10],v=c[d+14],u=c[d+3],y=c[d+7],w=c[d+11],A=c[d+15];c=k*r;d=k*t;var C=k*v,E=k*y,H=k*w,D=k*A,L=m*q,F=m*t,x=m*v,I=m*u,J=m*w,B=m*A,M=n*q,G=n*r,K=n*v,z=n*u,R=n*y,U=n*A,N=p*q,W=p*r,P=p*t,S=p*u,O=p*y,T=p*w,Q=q*y,V=q*w,q=q*A,X=r*u,Y=r*w,r=r*A,Z=t*u,aa=t*y,t=t*A,u=v*u,y=v*y,v=v*w,w=m*(t-v)+n*(y-r)+p*(Y-aa),A=k*(v-t)+n*(q-u)+p*(Z-V),p=k*(r-y)+m*(u-q)+p*(Q-X),k=k*(aa-Y)+m*(V-Z)+n*(X-Q),m=f*w+e*A+h*p+l*k;b.Matrix4x4.load(a,g,w/m,(e*(v-t)+h*(r-y)+l*(aa-Y))/m,(e*(U-T)+h*(O-B)+l*(J-R))/m,(e*(P-K)+
h*(x-W)+l*(G-F))/m,A/m,(f*(t-v)+h*(u-q)+l*(V-Z))/m,(f*(T-U)+h*(D-S)+l*(z-H))/m,(f*(K-P)+h*(N-C)+l*(d-M))/m,p/m,(f*(y-r)+e*(q-u)+l*(X-Q))/m,(f*(B-O)+e*(S-D)+l*(E-I))/m,(f*(W-x)+e*(C-N)+l*(L-c))/m,k/m,(f*(Y-aa)+e*(Z-V)+h*(Q-X))/m,(f*(R-J)+e*(H-z)+h*(I-E))/m,(f*(F-G)+e*(M-d)+h*(c-L))/m,!1)};b.Matrix4x4.add=function(a,g,c,d,f,e,h,l,k,m,n,p,q,r,t,v,u,y,w,A,C,E,H,D,L,F,x,I,J,B,M,G,K,z){b.Matrix4x4.load(a,g,c+w,d+A,f+C,e+E,h+H,l+D,k+L,m+F,n+x,p+I,q+J,r+B,t+M,v+G,u+K,y+z,!1)};b.Matrix4x4.addv=function(a,
g,c,d,f,e){b.Matrix4x4.add(a,g,c[d+0],c[d+4],c[d+8],c[d+12],c[d+1],c[d+5],c[d+9],c[d+13],c[d+2],c[d+6],c[d+10],c[d+14],c[d+3],c[d+7],c[d+11],c[d+15],f[e+0],f[e+4],f[e+8],f[e+12],f[e+1],f[e+5],f[e+9],f[e+13],f[e+2],f[e+6],f[e+10],f[e+14],f[e+3],f[e+7],f[e+11],f[e+15])};b.Matrix4x4.sub=function(a,g,c,d,f,e,h,l,k,m,n,p,q,r,t,v,u,y,w,A,C,E,H,D,L,F,x,I,J,B,M,G,K,z){b.Matrix4x4.load(a,g,c-w,d-A,f-C,e-E,h-H,l-D,k-L,m-F,n-x,p-I,q-J,r-B,t-M,v-G,u-K,y-z,!1)};b.Matrix4x4.subv=function(a,g,c,d,f,e){b.Matrix4x4.sub(a,
g,c[d+0],c[d+4],c[d+8],c[d+12],c[d+1],c[d+5],c[d+9],c[d+13],c[d+2],c[d+6],c[d+10],c[d+14],c[d+3],c[d+7],c[d+11],c[d+15],f[e+0],f[e+4],f[e+8],f[e+12],f[e+1],f[e+5],f[e+9],f[e+13],f[e+2],f[e+6],f[e+10],f[e+14],f[e+3],f[e+7],f[e+11],f[e+15])};b.Matrix4x4.mul=function(a,g,c,d,f,e,h,l,k,m,n,p,q,r,t,v,u,y,w,A,C,E,H,D,L,F,x,I,J,B,M,G,K,z){b.Matrix4x4.load(a,g,c*w+d*H+f*x+e*M,c*A+d*D+f*I+e*G,c*C+d*L+f*J+e*K,c*E+d*F+f*B+e*z,h*w+l*H+k*x+m*M,h*A+l*D+k*I+m*G,h*C+l*L+k*J+m*K,h*E+l*F+k*B+m*z,n*w+p*H+q*x+r*M,n*
A+p*D+q*I+r*G,n*C+p*L+q*J+r*K,n*E+p*F+q*B+r*z,t*w+v*H+u*x+y*M,t*A+v*D+u*I+y*G,t*C+v*L+u*J+y*K,t*E+v*F+u*B+y*z,!1)};b.Matrix4x4.mulv=function(a,g,c,d,f,e){b.Matrix4x4.mul(a,g,c[d+0],c[d+4],c[d+8],c[d+12],c[d+1],c[d+5],c[d+9],c[d+13],c[d+2],c[d+6],c[d+10],c[d+14],c[d+3],c[d+7],c[d+11],c[d+15],f[e+0],f[e+4],f[e+8],f[e+12],f[e+1],f[e+5],f[e+9],f[e+13],f[e+2],f[e+6],f[e+10],f[e+14],f[e+3],f[e+7],f[e+11],f[e+15])};b.Matrix4x4.mulScalar=function(a,g,c,d,f,e,h,l,k,m,n,p,q,r,t,v,u,y,w){b.Matrix4x4.load(a,
g,c*w,d*w,f*w,e*w,h*w,l*w,k*w,m*w,n*w,p*w,q*w,r*w,t*w,v*w,u*w,y*w,!1)};b.Matrix4x4.mulScalarv=function(a,g,c,d,f){b.Matrix4x4.mulScalar(a,g,c[d+0],c[d+4],c[d+8],c[d+12],c[d+1],c[d+5],c[d+9],c[d+13],c[d+2],c[d+6],c[d+10],c[d+14],c[d+3],c[d+7],c[d+11],c[d+15],f)};b.Matrix4x4.div=function(a,g,c,d,f,e,h,l,k,m,n,p,q,r,t,v,u,y,w,A,C,E,H,D,L,F,x,I,J,B,M,G,K,z){var R=H*I,U=H*J,N=H*B,W=H*G,P=H*K,S=H*z,O=D*x,T=D*J,Q=D*B,V=D*M,X=D*K,Y=D*z,Z=L*x,aa=L*I,ha=L*B,ia=L*M,ja=L*G,ka=L*z,la=F*x,ma=F*I,na=F*J,oa=F*M,
pa=F*G,qa=F*K,ba=x*G,ca=x*K;x*=z;var da=I*M,ea=I*K;I*=z;var fa=J*M,ga=J*G;J*=z;M*=B;G*=B;B*=K;K=D*(J-B)+L*(G-I)+F*(ea-ga);z=H*(B-J)+L*(x-M)+F*(fa-ca);F=H*(I-G)+D*(M-x)+F*(ba-da);H=H*(ga-ea)+D*(ca-fa)+L*(da-ba);D=w*K+A*z+C*F+E*H;b.Matrix4x4.mul(a,g,c,d,f,e,h,l,k,m,n,p,q,r,t,v,u,y,K/D,(A*(B-J)+C*(I-G)+E*(ga-ea))/D,(A*(ka-qa)+C*(pa-Y)+E*(X-ja))/D,(A*(na-ha)+C*(Q-ma)+E*(aa-T))/D,z/D,(w*(J-B)+C*(M-x)+E*(ca-fa))/D,(w*(qa-ka)+C*(S-oa)+E*(ia-P))/D,(w*(ha-na)+C*(la-N)+E*(U-Z))/D,F/D,(w*(G-I)+A*(x-M)+E*(da-
ba))/D,(w*(Y-pa)+A*(oa-S)+E*(W-V))/D,(w*(ma-Q)+A*(N-la)+E*(O-R))/D,H/D,(w*(ea-ga)+A*(fa-ca)+C*(ba-da))/D,(w*(ja-X)+A*(P-ia)+C*(V-W))/D,(w*(T-aa)+A*(Z-U)+C*(R-O))/D)};b.Matrix4x4.divv=function(a,g,c,d,f,e){b.Matrix4x4.div(a,g,c[d+0],c[d+4],c[d+8],c[d+12],c[d+1],c[d+5],c[d+9],c[d+13],c[d+2],c[d+6],c[d+10],c[d+14],c[d+3],c[d+7],c[d+11],c[d+15],f[e+0],f[e+4],f[e+8],f[e+12],f[e+1],f[e+5],f[e+9],f[e+13],f[e+2],f[e+6],f[e+10],f[e+14],f[e+3],f[e+7],f[e+11],f[e+15])};b.Matrix4x4.divScalar=function(a,g,c,d,
f,e,h,l,k,m,n,p,q,r,t,v,u,y,w){b.Matrix4x4.load(a,g,c/w,d/w,f/w,e/w,h/w,l/w,k/w,m/w,n/w,p/w,q/w,r/w,t/w,v/w,u/w,y/w,!1)};b.Matrix4x4.divScalarv=function(a,g,c,d,f){b.Matrix4x4.divScalar(a,g,c[d+0],c[d+4],c[d+8],c[d+12],c[d+1],c[d+5],c[d+9],c[d+13],c[d+2],c[d+6],c[d+10],c[d+14],c[d+3],c[d+7],c[d+11],c[d+15],f)};b.Matrix4x4.convertToString=function(a,g){return"Matrix4x4("+a[g+0]+", "+a[g+4]+", "+a[g+8]+", "+a[g+12]+",\n          "+a[g+1]+", "+a[g+5]+", "+a[g+9]+", "+a[g+13]+",\n          "+a[g+2]+", "+
a[g+6]+", "+a[g+10]+", "+a[g+14]+",\n          "+a[g+3]+", "+a[g+7]+", "+a[g+11]+", "+a[g+15]+")"}})(xpl);(function(b){void 0!==b.Matrix4x4&&(b.Matrix4x4.loadScale=function(a,g,c,d,f){b.Matrix4x4.load(a,g,c,0,0,0,0,d,0,0,0,0,f,0,0,0,0,1,!1)},b.Matrix4x4.loadTranslate=function(a,g,c,d,f,e){void 0===e&&(e=!0);b.Matrix4x4.load(a,g,1,0,0,c,0,1,0,d,0,0,1,f,0,0,0,1,!e)},b.Matrix4x4.loadRotateXAxis=function(a,g,c,d){void 0===d&&(d=!0);var f=Math.cos(c);c=Math.sin(c);b.Matrix4x4.load(a,g,1,0,0,0,0,f,-c,0,0,c,f,0,0,0,0,1,!d)},b.Matrix4x4.loadRotateYAxis=function(a,g,c,d){void 0===d&&(d=!0);var f=Math.cos(c);c=
Math.sin(c);b.Matrix4x4.load(a,g,f,0,c,0,0,1,0,0,-c,0,f,0,0,0,0,1,!d)},b.Matrix4x4.loadRotateZAxis=function(a,g,c,d){void 0===d&&(d=!0);var f=Math.cos(c);c=Math.sin(c);b.Matrix4x4.load(a,g,f,-c,0,0,c,f,0,0,0,0,1,0,0,0,0,1,!d)},b.Matrix4x4.loadRotate=function(a,g,c,d,f,e,h,l){void 0===l&&(l=!0);void 0===h&&(h=!0);var k=Math.cos(e);e=Math.sin(e);h&&(h=c*c+d*d+f*f,0<h&&(h=Math.sqrt(h),c/=h,d/=h,f/=h));h=1-k;var m=c*h,n=d*h,p=d*m,q=f*m,r=f*n,t=c*e,v=d*e;e*=f;b.Matrix4x4.load(a,g,k+c*m,p-e,q+v,0,p+e,k+
d*n,r-t,0,q-v,r+t,k+f*f*h,0,0,0,0,1,!l)},b.Matrix4x4.loadLookAt=function(a,g,c,d,f,e,h,l,k,m,n,p){void 0===p&&(p=!0);e-=c;h-=d;l-=f;var q=e*e+h*h+l*l;0<q&&(q=Math.sqrt(q),e/=q,h/=q,l/=q);q=h*n-l*m;n=l*k-e*n;k=e*m-h*k;m=q*q+n*n+k*k;0<m&&(m=Math.sqrt(m),q/=m,n/=m,k/=m);m=h*k-l*n;var r=l*q-e*k,t=e*n-h*q;b.Matrix4x4.load(a,g,q,n,k,-(q*c+n*d+k*f),m,r,t,-(m*c+r*d+t*f),e,h,l,-(e*c+h*d+l*f),0,0,0,1,!p)},b.Matrix4x4.loadPerspective=function(a,g,c,d,f,e,h,l,k,m,n){void 0===n&&(n=!0);b.Matrix4x4.load(a,g,xs,
0,0,0,0,ys,0,0,0,0,zs,f*e*(m-k)/-(e-f),0,0,1,0,!n)},b.Matrix4x4.loadAxisv=function(a,g,c,d,f){b.Matrix4x4.load(a,g,c[d+0],c[d+4],c[d+8],0,c[d+1],c[d+5],c[d+9],0,c[d+2],c[d+6],c[d+10],0,0,0,0,1,f)},b.Matrix4x4.mulScale=function(a,g,c,d,b){a[g+0]*=c;a[g+4]*=d;a[g+8]*=b;a[g+1]*=c;a[g+5]*=d;a[g+9]*=b;a[g+2]*=c;a[g+6]*=d;a[g+10]*=b;a[g+3]*=c;a[g+7]*=d;a[g+11]*=b},b.Matrix4x4.mulTranslate=function(a,g,c,d,b,e){void 0===e&&(e=!0);if(e)a[g+12]+=a[g+0]*c+a[g+4]*d+a[g+8]*b,a[g+13]+=a[g+1]*c+a[g+5]*d+a[g+9]*
b,a[g+14]+=a[g+2]*c+a[g+6]*d+a[g+10]*b,a[g+15]+=a[g+3]*c+a[g+7]*d+a[g+11]*b;else{e=a[g+12];var h=a[g+13],l=a[g+14],k=a[g+15];a[g+0]+=e*c;a[g+4]+=e*d;a[g+8]+=e*b;a[g+1]+=h*c;a[g+5]+=h*d;a[g+9]+=h*b;a[g+2]+=l*c;a[g+6]+=l*d;a[g+10]+=l*b;a[g+3]+=k*c;a[g+7]+=k*d;a[g+11]+=k*b}},b.Matrix4x4.mulRotateXAxis=function(a,g,c,d){void 0===d&&(d=!0);var b=void 0;d?(b=Math.cos(c),c=Math.sin(c)):(b=Math.cos(c),c=-Math.sin(c));d=a[g+4];var e=a[g+8],h=a[g+5],l=a[g+9],k=a[g+6],m=a[g+10],n=a[g+7],p=a[g+11];a[g+4]=d*b+
e*c;a[g+8]=d*-c+e*b;a[g+5]=h*b+l*c;a[g+9]=h*-c+l*b;a[g+6]=k*b+m*c;a[g+10]=k*-c+m*b;a[g+7]=n*b+p*c;a[g+11]=n*-c+p*b},b.Matrix4x4.mulRotateYAxis=function(a,b,c,d){void 0===d&&(d=!0);var f=void 0;d?(f=Math.cos(c),c=Math.sin(c)):(f=Math.cos(c),c=-Math.sin(c));d=a[b+0];var e=a[b+8],h=a[b+1],l=a[b+9],k=a[b+2],m=a[b+10],n=a[b+3],p=a[b+11];a[b+0]=d*f+e*-c;a[b+8]=d*c+e*f;a[b+1]=h*f+l*-c;a[b+9]=h*c+l*f;a[b+2]=k*f+m*-c;a[b+10]=k*c+m*f;a[b+3]=n*f+p*-c;a[b+11]=n*c+p*f},b.Matrix4x4.mulRotateZAxis=function(a,b,
c,d){void 0===d&&(d=!0);var f=void 0;d?(f=Math.cos(c),c=Math.sin(c)):(f=Math.cos(c),c=-Math.sin(c));d=a[b+0];var e=a[b+4],h=a[b+1],l=a[b+5],k=a[b+2],m=a[b+6],n=a[b+3],p=a[b+7];a[b+0]=d*f+e*c;a[b+4]=d*-c+e*f;a[b+1]=h*f+l*c;a[b+5]=h*-c+l*f;a[b+2]=k*f+m*c;a[b+6]=k*-c+m*f;a[b+3]=n*f+p*c;a[b+7]=n*-c+p*f},b.Matrix4x4.mulRotate=function(a,b,c,d,f,e,h,l){void 0===h&&(h=!0);void 0===l&&(l=!0);var k=void 0;l?(k=Math.cos(e),e=Math.sin(e)):(k=Math.cos(e),e=-Math.sin(e));h&&(h=c*c+d*d+f*f,0<h&&(h=Math.sqrt(h),
c/=h,d/=h,f/=h));h=1-k;var m=c*h,n=d*h,p=d*m,q=f*m,r=f*n,t=c*e,v=d*e,u=f*e;e=a[b+0];l=a[b+4];var y=a[b+8],w=a[b+1],A=a[b+5],C=a[b+9],E=a[b+2],H=a[b+6],D=a[b+10],L=a[b+3],F=a[b+7],x=a[b+11];c=k+c*m;var m=p-u,I=q+v,p=p+u;d=k+d*n;n=r-t;q-=v;r+=t;f=k+f*f*h;a[b+0]=e*c+l*p+y*q;a[b+4]=e*m+l*d+y*r;a[b+8]=e*I+l*n+y*f;a[b+1]=w*c+A*p+C*q;a[b+5]=w*m+A*d+C*r;a[b+9]=w*I+A*n+C*f;a[b+2]=E*c+H*p+D*q;a[b+6]=E*m+H*d+D*r;a[b+10]=E*I+H*n+D*f;a[b+3]=L*c+F*p+x*q;a[b+7]=L*m+F*d+x*r;a[b+11]=L*I+F*n+x*f},b.Matrix4x4.mulLookAt=
function(a,b,c,d,f,e,h,l,k,m,n,p){void 0===p&&(p=!0);e-=c;h-=d;l-=f;var q=e*e+h*h+l*l;0<q&&(q=Math.sqrt(q),e/=q,h/=q,l/=q);q=h*n-l*m;n=l*k-e*n;k=e*m-h*k;m=q*q+n*n+k*k;0<m&&(m=Math.sqrt(m),q/=m,n/=m,k/=m);m=h*k-l*n;var r=l*q-e*k,t=e*n-h*q,v=-(q*c+n*d+k*f),u=-(m*c+r*d+t*f);c=-(e*c+h*d+l*f);d=a[b+0];f=a[b+4];var y=a[b+8],w=a[b+1],A=a[b+5],C=a[b+9],E=a[b+2],H=a[b+6],D=a[b+10],L=a[b+3],F=a[b+7],x=a[b+11];if(p)a[b+0]=d*q+f*m+y*e,a[b+4]=d*n+f*r+y*h,a[b+8]=d*k+f*t+y*l,a[b+12]+=d*v+f*u+y*c,a[b+1]=w*q+A*m+
C*e,a[b+5]=w*n+A*r+C*h,a[b+9]=w*k+A*t+C*l,a[b+13]+=w*v+A*u+C*c,a[b+2]=E*q+H*m+D*e,a[b+6]=E*n+H*r+D*h,a[b+10]=E*k+H*t+D*l,a[b+14]+=E*v+H*u+D*c,a[b+3]=L*q+F*m+x*e,a[b+7]=L*n+F*r+x*h,a[b+11]=L*k+F*t+x*l,a[b+15]+=L*v+F*u+x*c;else{p=a[b+12];var I=a[b+13],J=a[b+14],B=a[b+15];a[b+0]=d*q+f*n+y*k+p*v;a[b+4]=d*m+f*r+y*t+p*u;a[b+8]=d*e+f*h+y*l+p*c;a[b+1]=w*q+A*n+C*k+I*v;a[b+5]=w*m+A*r+C*t+I*u;a[b+9]=w*e+A*h+C*l+I*c;a[b+2]=E*q+H*n+D*k+J*v;a[b+6]=E*m+H*r+D*t+J*u;a[b+10]=E*e+H*h+D*l+J*c;a[b+3]=L*q+F*n+x*k+B*v;
a[b+7]=L*m+F*r+x*t+B*u;a[b+11]=L*e+F*h+x*l+B*c}},b.Matrix4x4.mulPerspective=function(a,b,c,d,f,e,h,l,k,m,n){void 0===n&&(n=!0);var p=e-f,q=e*(m-k);e=a[b+8];m=a[b+9];var r=a[b+10],t=a[b+11];c=f*h/c;d=f*l/d;k=q/p+k;n?(f=f*q/-p,a[b+0]*=c,a[b+4]*=d,a[b+8]=e*k+a[b+12],a[b+12]=e*f,a[b+1]*=c,a[b+5]*=d,a[b+9]=m*k+a[b+13],a[b+13]=m*f,a[b+2]*=c,a[b+6]*=d,a[b+10]=r*k+a[b+14],a[b+14]=r*f,a[b+3]*=c,a[b+7]*=d,a[b+11]=t*k+a[b+15],a[b+15]=t*f):(f=f*q/-p,a[b+0]*=c,a[b+4]*=d,a[b+8]=e*k+a[b+12]*f,a[b+12]=e,a[b+1]*=
c,a[b+5]*=d,a[b+9]=m*k+a[b+13]*f,a[b+13]=m,a[b+2]*=c,a[b+6]*=d,a[b+10]=r*k+a[b+14]*f,a[b+14]=r,a[b+3]*=c,a[b+7]*=d,a[b+11]=t*k+a[b+15]*f,a[b+15]=t)},b.Matrix4x4.normalizeAxisv=function(a,b,c,d,f){void 0===f&&(f=!0);var e=void 0,h,l,k,m,n,p,q,e=c[d+0];m=c[d+5];q=c[d+10];f?(h=c[d+1],l=c[d+2],k=c[d+4],n=c[d+6],p=c[d+8],c=c[d+9]):(h=c[d+4],l=c[d+8],k=c[d+1],n=c[d+9],p=c[d+2],c=c[d+6]);d=e*e+h*h+l*l;0<d&&(d=Math.sqrt(d),e/=d,h/=d,l/=d);d=k*k+m*m+n*n;0<d&&(d=Math.sqrt(d),k/=d,m/=d,n/=d);d=p*p+c*c+q*q;0<
d&&(d=Math.sqrt(d),p/=d,c/=d,q/=d);a[b+0]=e;a[b+5]=m;a[b+10]=q;f?(a[b+1]=h,a[b+2]=l,a[b+4]=k,a[b+6]=n,a[b+8]=p,a[b+9]=c):(a[b+4]=h,a[b+8]=l,a[b+1]=k,a[b+9]=n,a[b+2]=p,a[b+6]=c)},b.Matrix4x4.slrepAxisAndLrepOtherv=function(a,g,c,d,f,e,h,l){void 0===l&&(l=!0);var k=1-h,m=void 0,n,p,q,r,t,v,u,y,m=void 0,w,A,C,E,H,D,m=c[d+0];r=c[d+5];y=c[d+10];D=c[d+15];l?(n=c[d+1],p=c[d+2],w=c[d+3],q=c[d+4],t=c[d+6],A=c[d+7],v=c[d+8],u=c[d+9],C=c[d+11],E=c[d+12],H=c[d+13],c=c[d+14]):(n=c[d+4],p=c[d+8],w=c[d+12],q=c[d+
1],t=c[d+9],A=c[d+13],v=c[d+2],u=c[d+6],C=c[d+14],E=c[d+3],H=c[d+7],c=c[d+11]);var L=void 0,F,x,I,J,B,M,G,K,z,R,U,N,W,L=f[e+0];J=f[e+5];z=f[e+10];W=f[e+15];l?(F=f[e+1],x=f[e+2],d=f[e+3],I=f[e+4],B=f[e+6],M=f[e+7],G=f[e+8],K=f[e+9],R=f[e+11],U=f[e+12],N=f[e+13],f=f[e+14]):(F=f[e+4],x=f[e+8],d=f[e+12],I=f[e+1],B=f[e+9],M=f[e+13],G=f[e+2],K=f[e+6],R=f[e+14],U=f[e+3],N=f[e+7],f=f[e+11]);var P=m*m+n*n+p*p;0<P&&(P=Math.sqrt(P),m/=P,n/=P,p/=P);var S=q*q+r*r+t*t;0<S&&(S=Math.sqrt(S),q/=S,r/=S,t/=S);e=v*v+
u*u+y*y;0<e&&(e=Math.sqrt(e),v/=e,u/=e,y/=e);var O=L*L+F*F+x*x;0<O&&(O=Math.sqrt(O),L/=O,F/=O,x/=O);var T=I*I+J*J+B*B;0<T&&(T=Math.sqrt(T),I/=T,J/=T,B/=T);var Q=G*G+K*K+z*z;0<Q&&(Q=Math.sqrt(Q),G/=Q,K/=Q,z/=Q);var V=m*L+n*F+p*x;if(1<=V)x=P*k+O*h,m*=x,n*=x,p*=x;else if(-1>=V)x=P*k-O*h,m*=x,n*=x,p*=x;else{var P=P*k+O*h,O=Math.acos(V),X=Math.sin(O),V=Math.sin(O*k)/X,O=Math.sin(O*h)/X,m=(m*V+L*O)*P;n=(n*V+F*O)*P;p=(p*V+x*O)*P}x=q*I+r*J+t*B;1<=x?(B=S*k+T*h,q*=B,r*=B,t*=B):-1>=x?(B=S*k-T*h,q*=B,r*=B,t*=
B):(S=S*k+T*h,x=Math.acos(x),F=Math.sin(x),T=Math.sin(x*k)/F,x=Math.sin(x*h)/F,q=(q*T+I*x)*S,r=(r*T+J*x)*S,t=(t*T+B*x)*S);B=v*G+u*K+y*z;1<=B?(z=e*k+Q*h,v*=z,u*=z,y*=z):-1>=B?(z=e*k-Q*h,v*=z,u*=z,y*=z):(e=e*k+Q*h,B=Math.acos(B),J=Math.sin(B),Q=Math.sin(B*k)/J,B=Math.sin(B*h)/J,v=(v*Q+G*B)*e,u=(u*Q+K*B)*e,y=(y*Q+z*B)*e);b.Matrix4x4.load(a,g,m,q,v,E*k+U*h,n,r,u,H*k+N*h,p,t,y,c*k+f*h,w*k+d*h,A*k+M*h,C*k+R*h,D*k+W*h,!l)},b.Matrix4x4.toRotateAxisv=function(a,b,c,d,f){void 0===f&&(f=!0);var e=c[d+0],h=c[d+
5],l=c[d+10],k=void 0,m,n,p;f?(k=c[d+4],m=c[d+8],f=c[d+1],n=c[d+9],p=c[d+2],c=c[d+6]):(k=c[d+1],m=c[d+2],f=c[d+4],n=c[d+6],p=c[d+8],c=c[d+9]);d=.5*(k+f);var q=.5*(p+m),r=.5*(n+c),e=Math.min(e-(0!=r?Math.abs(d*q/r):0),h-(0!=q?Math.abs(d*r/q):0),l-(0!=d?Math.abs(q*r/d):0)),h=.5*(n-c);m=.5*(p-m);k=.5*(k-f);f=h*h+m*m+k*k;p=e*e+f;0<p&&(e/=Math.sqrt(p));if(1<=e)return a[b+0]=0,a[b+1]=0,a[b+2]=0;0<f?(f=Math.sqrt(f),a[b+0]=-h/f,a[b+1]=-m/f,a[b+2]=-k/f):(a[b+0]=0,a[b+1]=0,a[b+2]=0);return Math.acos(e)},b.Matrix4x4.fromQuaternionv=
function(a,g,c,d,f){void 0===f&&(f=!0);var e=c[d+0],h=c[d+1],l=c[d+2],k=c[d+3];c=e*e;d=h*h;var m=l*l,n=k*k,p=h*l*2,q=h*k*2,r=l*k*2,h=e*h*2,l=e*l*2,e=e*k*2;b.Matrix4x4.load(a,g,d+c-n-m,p-e,q+l,0,p+e,m+c-d-n,r-h,0,q-l,r+h,n+c-m-d,0,0,0,0,1,!f)},b.Matrix4x4.mulQuaternionv=function(a,b,c,d,f){void 0===f&&(f=!0);var e=c[d+0],h=c[d+1],l=c[d+2],k=c[d+3],m=e*e,n=h*h,p=l*l,q=k*k,r=h*l*2;d=h*k*2;c=l*k*2;var h=e*h*2,l=e*l*2,t=e*k*2,e=a[b+0],k=a[b+4],v=a[b+8],u=a[b+1],y=a[b+5],w=a[b+9],A=a[b+2],C=a[b+6],E=a[b+
10],H=a[b+3],D=a[b+7],L=a[b+11],F=n+m-q-p,x=p+m-n-q,m=q+m-p-n,n=void 0;f?(n=r-t,f=d+l,r+=t,p=c-h,d-=l,c+=h):(n=r+t,f=d-l,r-=t,p=c+h,d+=l,c-=h);a[b+0]=e*F+k*r+v*d;a[b+4]=e*n+k*x+v*c;a[b+8]=e*f+k*p+v*m;a[b+1]=u*F+y*r+w*d;a[b+5]=u*n+y*x+w*c;a[b+9]=u*f+y*p+w*m;a[b+2]=A*F+C*r+E*d;a[b+6]=A*n+C*x+E*c;a[b+10]=A*f+C*p+E*m;a[b+3]=H*F+D*r+L*d;a[b+7]=H*n+D*x+L*c;a[b+11]=H*f+D*p+L*m},b.Matrix4x4.mulQuaternionAxisv=function(a,b,c,d,f){void 0===f&&(f=!0);var e=c[d+0],h=c[d+1],l=c[d+2],k=c[d+3],m=e*e,n=h*h,p=l*l,
q=k*k,r=h*l*2;d=h*k*2;c=l*k*2;var h=e*h*2,l=e*l*2,t=e*k*2,e=a[b+0],k=a[b+4],v=a[b+8],u=a[b+1],y=a[b+5],w=a[b+9],A=a[b+2],C=a[b+6],E=a[b+10],H=n+m-q-p,D=p+m-n-q,m=q+m-p-n,n=void 0;f?(n=r-t,f=d+l,r+=t,p=c-h,d-=l,c+=h):(n=r+t,f=d-l,r-=t,p=c+h,d+=l,c-=h);a[b+0]=e*H+k*r+v*d;a[b+4]=e*n+k*D+v*c;a[b+8]=e*f+k*p+v*m;a[b+1]=u*H+y*r+w*d;a[b+5]=u*n+y*D+w*c;a[b+9]=u*f+y*p+w*m;a[b+2]=A*H+C*r+E*d;a[b+6]=A*n+C*D+E*c;a[b+10]=A*f+C*p+E*m},b.Matrix4x4.toQuaternionv=function(a,g,c,d,f,e){void 0===e&&(e=!0);var h=c[d+
0],l=c[d+5],k=c[d+10],m=void 0,n,p,q,r;e?(m=c[d+4],n=c[d+8],e=c[d+1],p=c[d+9],q=c[d+2],r=c[d+6]):(m=c[d+1],n=c[d+2],e=c[d+4],p=c[d+6],q=c[d+8],r=c[d+9]);c=(e*r-q*l)*n+(q*m-h*r)*p+(h*l-e*m)*k;d=0>c;0!=c&&(c=Math.pow(Math.abs(c),1/3),h/=c,e/=c,q/=c,m/=c,l/=c,r/=c,n/=c,p/=c,k/=c,c=Math.sqrt(c));p=.5*(r-p);n=.5*(n-q);m=.5*(e-m);q=p*p+n*n+m*m;0<q&&(q=Math.sqrt(q),d?(p/=-q,n/=-q,m/=-q):(p/=q,n/=q,m/=q));e=b.MathUtils.mid(.5*(h+l+k-1),1,-1);e=d?-b.MathUtils.mid(.5*(h+l+k+1),1,-1):b.MathUtils.mid(.5*(h+l+
k-1),1,-1);h=.5*Math.acos(e);e=Math.cos(h);q=Math.sin(h);f?(a[g+0]=c*e,a[g+1]=c*q*p,a[g+2]=c*q*n,a[g+3]=c*q*m):(a[g+0]=c*-e,a[g+1]=c*-q*p,a[g+2]=c*-q*n,a[g+3]=c*-q*m)})})(xpl);(function(b){b.Quaternion=function(){throw Error("Unsupported operation");};b.Quaternion.load=function(a,b,c,d,f,e){a[b+0]=c;a[b+1]=d;a[b+2]=f;a[b+3]=e};b.Quaternion.loadv=function(a,g,c,d){b.Quaternion.load(a,g,c[d+0],c[d+1],c[d+2],c[d+3])};b.Quaternion.loadZero=function(a,g){b.Quaternion.load(a,g,0,0,0,0)};b.Quaternion.loadIdentity=function(a,g){b.Quaternion.load(a,g,1,0,0,0)};b.Quaternion.absSq=function(a,b){var c=a[b+0],d=a[b+1],f=a[b+2],e=a[b+3];return c*c+d*d+f*f+e*e};b.Quaternion.abs=function(a,
g){return Math.sqrt(b.Quaternion.absSq(a,g))};b.Quaternion.normalizev=function(a,g,c,d){var f=c[d+0],e=c[d+1],h=c[d+2];c=c[d+3];d=f*f+e*e+h*h+c*c;0<d?(d=Math.sqrt(d),b.Quaternion.load(a,g,f/d,e/d,h/d,c/d)):b.Quaternion.loadZero(a,g)};b.Quaternion.exp=function(a,g,c,d,f,e){c=Math.exp(c);var h=Math.sqrt(d*d+f*f+e*e),l=c*Math.sin(h)/h;b.Quaternion.load(a,g,c*Math.cos(h),d*l,f*l,e*l)};b.Quaternion.expv=function(a,g,c,d){b.Quaternion.exp(a,g,c[d+0],c[d+1],c[d+2],c[d+3])};b.Quaternion.cis=function(a,g,
c,d,f){var e=Math.sqrt(c*c+d*d+f*f),h=Math.sin(e)/e;b.Quaternion.load(a,g,Math.cos(e),c*h,d*h,f*h)};b.Quaternion.cisv=function(a,g,c,d){b.Quaternion.cis(a,g,c[d+0],c[d+1],c[d+2])};b.Quaternion.log=function(a,g,c,d,f,e){var h=Math.sqrt(c*c+d*d+f*f+e*e);c=Math.acos(c/h)/Math.sqrt(d*d+f*f+e*e);b.Quaternion.load(a,g,Math.log(h),d*c,f*c,e*c)};b.Quaternion.logv=function(a,g,c,d){b.Quaternion.log(a,g,c[d+0],c[d+1],c[d+2],c[d+3])};b.Quaternion.lerp=function(a,g,c,d,f,e,h,l,k,m,n){var p=1-n;b.Quaternion.load(a,
g,c*p+h*n,d*p+l*n,f*p+k*n,e*p+m*n)};b.Quaternion.lerpv=function(a,g,c,d,f,e,h){b.Quaternion.lerp(a,g,c[d+0],c[d+1],c[d+2],c[d+3],f[e+0],f[e+1],f[e+2],f[e+3],h)};b.Quaternion.slerp=function(a,g,c,d,f,e,h,l,k,m,n){var p=c*c+d*d+f*f+e*e;0<p&&(p=Math.sqrt(p),c/=p,d/=p,f/=p,e/=p);var q=h*h+l*l+k*k+m*m;0<q&&(q=Math.sqrt(q),h/=q,l/=q,k/=q,m/=q);var r=c*h+d*l+f*k+e*m;if(1<=r)h=p*(1-n)+q*n,b.Quaternion.load(a,g,c*h,d*h,f*h,e*h);else if(-1>=r)h=p*(1-n)-q*n,b.Quaternion.load(a,g,c*h,d*h,f*h,e*h);else{var p=
p*(1-n)+q*n,q=Math.acos(r),t=Math.sin(q),r=Math.sin(q*(1-n))/t;n=Math.sin(q*n)/t;b.Quaternion.load(a,g,(c*r+h*n)*p,(d*r+l*n)*p,(f*r+k*n)*p,(e*r+m*n)*p)}};b.Quaternion.slerpv=function(a,g,c,d,f,e,h){b.Quaternion.slerp(a,g,c[d+0],c[d+1],c[d+2],c[d+3],f[e+0],f[e+1],f[e+2],f[e+3],h)};b.Quaternion.dot=function(a,b,c,d,f,e,h,l){return a*f+b*e+c*h+d*l};b.Quaternion.dotv=function(a,b,c,d){return a[b+0]*c[d+0]+a[b+1]*c[d+1]+a[b+2]*c[d+2]+a[b+3]*c[d+3]};b.Quaternion.conjugatev=function(a,g,c,d){b.Quaternion.load(a,
g,c[d+0],-c[d+1],-c[d+2],-c[d+3])};b.Quaternion.inversev=function(a,g,c,d){var f=c[d+0],e=c[d+1],h=c[d+2];c=c[d+3];d=f*f+e*e+h*h+c*c;0<d&&(d=Math.sqrt(d),f/=d,e/=-d,h/=-d,c/=-d);b.Quaternion.load(a,g,f,e,h,c)};b.Quaternion.add=function(a,g,c,d,f,e,h,l,k,m){b.Quaternion.load(a,g,c+h,d+l,f+k,e+m)};b.Quaternion.addv=function(a,g,c,d,f,e){b.Quaternion.add(a,g,c[d+0],c[d+1],c[d+2],c[d+3],f[e+0],f[e+1],f[e+2],f[e+3])};b.Quaternion.sub=function(a,g,c,d,f,e,h,l,k,m){b.Quaternion.load(a,g,c-h,d-l,f-k,e-m)};
b.Quaternion.subv=function(a,g,c,d,f,e){b.Quaternion.sub(a,g,c[d+0],c[d+1],c[d+2],c[d+3],f[e+0],f[e+1],f[e+2],f[e+3])};b.Quaternion.mul=function(a,g,c,d,f,e,h,l,k,m){b.Quaternion.load(a,g,c*h-(d*l+f*k+e*m),c*l+d*h+(f*m-e*k),c*k+f*h+(e*l-d*m),c*m+e*h+(d*k-f*l))};b.Quaternion.mulv=function(a,g,c,d,f,e){b.Quaternion.mul(a,g,c[d+0],c[d+1],c[d+2],c[d+3],f[e+0],f[e+1],f[e+2],f[e+3])};b.Quaternion.mulScalar=function(a,g,c,d,f,e,h){b.Quaternion.load(a,g,c*h,d*h,f*h,e*h)};b.Quaternion.mulScalarv=function(a,
g,c,d,f){b.Quaternion.mulScalar(a,g,c[d+0],c[d+1],c[d+2],c[d+3],f)};b.Quaternion.div=function(a,g,c,d,f,e,h,l,k,m){var n=h*h+l*l+k*k+m*m;b.Quaternion.load(a,g,(c*h+(d*l+f*k+e*m))/n,(-c*l+d*h-(f*m-e*k))/n,(-c*k+f*h-(e*l-d*m))/n,(-c*m+e*h-(d*k-f*l))/n)};b.Quaternion.divv=function(a,g,c,d,f,e){b.Quaternion.div(a,g,c[d+0],c[d+1],c[d+2],c[d+3],f[e+0],f[e+1],f[e+2],f[e+3])};b.Quaternion.divScalar=function(a,g,c,d,f,e,h){b.Quaternion.load(a,g,c/h,d/h,f/h,e/h)};b.Quaternion.divScalarv=function(a,g,c,d,f){b.Quaternion.divScalar(a,
g,c[d+0],c[d+1],c[d+2],c[d+3],f)};b.Quaternion.convertToString=function(a,b){return"Quaternion("+a[b+0]+", "+a[b+1]+", "+a[b+2]+", "+a[b+3]+")"}})(xpl);(function(b){void 0!==b.Quaternion&&(b.Quaternion.loadIAxisRotate=function(a,g,c){c*=.5;b.Quaternion.load(a,g,Math.cos(c),Math.sin(c),0,0)},b.Quaternion.loadJAxisRotate=function(a,g,c){c*=.5;b.Quaternion.load(a,g,Math.cos(c),0,Math.sin(c),0)},b.Quaternion.loadKAxisRotate=function(a,g,c){c*=.5;b.Quaternion.load(a,g,Math.cos(c),0,0,Math.sin(c))},b.Quaternion.loadRotate=function(a,g,c,d,f,e,h){void 0===h&&(h=!0);h&&(h=c*c+d*d+f*f,0<h&&(h=Math.sqrt(h),c/=h,d/=h,f/=h));e*=.5;h=Math.sin(e);b.Quaternion.load(a,
g,Math.cos(e),c*h,d*h,f*h)},b.Quaternion.loadRotateVector3=function(a,g,c,d,f,e,h,l,k,m,n){void 0===n&&(n=1);if(e)if(e=c*c+d*d+f*f,0<e)e=Math.sqrt(e),c/=e,d/=e,f/=e;else{b.Quaternion.loadIdentity(a,g);return}if(m)if(m=h*h+l*l+k*k,0<m)m=Math.sqrt(m),h/=m,l/=m,k/=m;else{b.Quaternion.loadIdentity(a,g);return}e=c*h+d*l+f*k;1<=e?b.Quaternion.loadIdentity(a,g):(m=d*k-f*l,f=f*h-c*k,c=c*l-d*h,d=m*m+f*f+c*c,0<d?(d=Math.sqrt(d),n*=.5*Math.acos(e),h=Math.sin(n),b.Quaternion.load(a,g,Math.cos(n),m/d*h,f/d*h,
c/d*h)):b.Quaternion.loadIdentity(a,g))},b.Quaternion.loadRotateVector3v=function(a,g,c,d,f,e,h,l,k){b.Quaternion.loadRotateVector3(a,g,c[d+0],c[d+1],c[d+2],f,e[h+0],e[h+1],e[h+2],l,k)},b.Quaternion.mulIAxisRotate=function(a,g,c){c*=.5;var d=Math.sin(c);c=Math.cos(c);var f=a[g+0],e=a[g+1],h=a[g+2],l=a[g+3];b.Quaternion.load(a,g,f*c-e*d,f*d+e*c,h*c+l*d,l*c-h*d)},b.Quaternion.mulJAxisRotate=function(a,g,c){c*=.5;var d=Math.sin(c);c=Math.cos(c);var f=a[g+0],e=a[g+1],h=a[g+2],l=a[g+3];b.Quaternion.load(a,
g,f*c-h*d,e*c-l*d,f*d+h*c,l*c+e*d)},b.Quaternion.mulKAxisRotate=function(a,g,c){c*=.5;var d=Math.sin(c);c=Math.cos(c);var f=a[g+0],e=a[g+1],h=a[g+2],l=a[g+3];b.Quaternion.load(a,g,f*c-l*d,e*c+h*d,h*c-e*d,f*d+l*c)},b.Quaternion.mulRotate=function(a,g,c,d,f,e,h){void 0===h&&(h=!0);h&&(h=c*c+d*d+f*f,0<h&&(h=Math.sqrt(h),c/=h,d/=h,f/=h));e*=.5;h=Math.sin(e);e=Math.cos(e);c*=h;d*=h;f*=h;h=a[g+0];var l=a[g+1],k=a[g+2],m=a[g+3];b.Quaternion.load(a,g,h*e-(l*c+k*d+m*f),h*c+l*e+(k*f-m*d),h*d+k*e+(m*c-l*f),
h*f+m*e+(l*d-k*c))})})(xpl);(function(b){b.Vector3=function(){throw Error("Unsupported operation");};b.Vector3.load=function(a,b,c,d,f){a[b+0]=c;a[b+1]=d;a[b+2]=f};b.Vector3.loadv=function(a,g,c,d){b.Vector3.load(a,g,c[d+0],c[d+1],c[d+2])};b.Vector3.loadZero=function(a,g){b.Vector3.load(a,g,0,0,0)};b.Vector3.lenSq=function(a,b){var c=a[b+0],d=a[b+1],f=a[b+2];return c*c+d*d+f*f};b.Vector3.len=function(a,g){return Math.sqrt(b.Vector3.lenSq(a,g))};b.Vector3.normalizev=function(a,g,c,d){var f=c[d+0],e=c[d+1];c=c[d+2];d=f*f+e*e+
c*c;0<d?(d=Math.sqrt(d),b.Vector3.load(a,g,f/d,e/d,c/d)):b.Vector3.loadZero(a,g)};b.Vector3.lerp=function(a,g,c,d,f,e,h,l,k){var m=1-k;b.Vector3.load(a,g,c*m+e*k,d*m+h*k,f*m+l*k)};b.Vector3.lerpv=function(a,g,c,d,f,e,h){b.Vector3.lerp(a,g,c[d+0],c[d+1],c[d+2],f[e+0],f[e+1],f[e+2],h)};b.Vector3.slerp=function(a,g,c,d,f,e,h,l,k){var m=c*c+d*d+f*f;0<m&&(m=Math.sqrt(m),c/=m,d/=m,f/=m);var n=e*e+h*h+l*l;0<n&&(n=Math.sqrt(n),e/=n,h/=n,l/=n);var p=c*e+d*h+f*l;if(1<=p)m=m*(1-k)+n*k,b.Vector3.load(a,g,c*m,
d*m,f*m);else if(-1>=p)m=m*(1-k)-n*k,b.Vector3.load(a,g,c*m,d*m,f*m);else{var m=m*(1-k)+n*k,n=Math.acos(p),q=Math.sin(n),p=Math.sin(n*(1-k))/q;k=Math.sin(n*k)/q;b.Vector3.load(a,g,(c*p+e*k)*m,(d*p+h*k)*m,(f*p+l*k)*m)}};b.Vector3.slerpv=function(a,g,c,d,f,e,h){b.Vector3.slerp(a,g,c[d+0],c[d+1],c[d+2],f[e+0],f[e+1],f[e+2],h)};b.Vector3.dot=function(a,b,c,d,f,e){return a*d+b*f+c*e};b.Vector3.dotv=function(a,b,c,d){return a[b+0]*c[d+0]+a[b+1]*c[d+1]+a[b+2]*c[d+2]};b.Vector3.cross=function(a,g,c,d,f,e,
h,l){b.Vector3.load(a,g,d*l-f*h,f*e-c*l,c*h-d*e)};b.Vector3.crossv=function(a,g,c,d,f,e){b.Vector3.cross(a,g,c[d+0],c[d+1],c[d+2],f[e+0],f[e+1],f[e+2])};b.Vector3.cos=function(a,b,c,d,f,e){var h=a*a+b*b+c*c;0<h&&(h=Math.sqrt(h),a/=h,b/=h,c/=h);h=d*d+f*f+e*e;0<h&&(h=Math.sqrt(h),d/=h,f/=h,e/=h);return a*d+b*f+c*e};b.Vector3.cosv=function(a,g,c,d){return b.Vector3.cos(a[g+0],a[g+1],a[g+2],c[d+0],c[d+1],c[d+2])};b.Vector3.reversev=function(a,g,c,d){b.Vector3.load(a,g,-c[d+0],-c[d+1],-c[d+2])};b.Vector3.add=
function(a,g,c,d,f,e,h,l){b.Vector3.load(a,g,c+e,d+h,f+l)};b.Vector3.addv=function(a,g,c,d,f,e){b.Vector3.add(a,g,c[d+0],c[d+1],c[d+2],f[e+0],f[e+1],f[e+2])};b.Vector3.sub=function(a,g,c,d,f,e,h,l){b.Vector3.load(a,g,c-e,d-h,f-l)};b.Vector3.subv=function(a,g,c,d,f,e){b.Vector3.sub(a,g,c[d+0],c[d+1],c[d+2],f[e+0],f[e+1],f[e+2])};b.Vector3.mul=function(a,g,c,d,f,e){b.Vector3.load(a,g,c*e,d*e,f*e)};b.Vector3.mulv=function(a,g,c,d,f){b.Vector3.mul(a,g,c[d+0],c[d+1],c[d+2],f)};b.Vector3.mulQuaternionv=
function(a,g,c,d,f,e){var h=c[d+0],l=c[d+1],k=c[d+2];c=c[d+3];d=f[e+0];var m=f[e+1],n=f[e+2];f=-(l*d+k*m+c*n);e=h*d+(k*n-c*m);var p=h*m+(c*d-l*n);d=h*n+(l*m-k*d);b.Vector3.load(a,g,-f*l+e*h-(p*c-d*k),-f*k+p*h-(d*l-e*c),-f*c+d*h-(e*k-p*l))};b.Vector3.mulMatrix4x4v=function(a,g,c,d,f,e,h){null==h&&(h=!0);if(h){h=f[e+0];var l=f[e+1],k=f[e+2],m=c[d+3]*h+c[d+7]*l+c[d+11]*k+c[d+15];b.Vector3.load(a,g,(c[d+0]*h+c[d+4]*l+c[d+8]*k+c[d+12])/m,(c[d+1]*h+c[d+5]*l+c[d+9]*k+c[d+13])/m,(c[d+2]*h+c[d+6]*l+c[d+10]*
k+c[d+14])/m)}else h=c[d+0],l=c[d+1],k=c[d+2],m=h*f[e+12]+l*f[e+13]+k*f[e+14]+f[e+15],b.Vector3.load(a,g,(h*f[e+0]+l*f[e+1]+k*f[e+2]+f[e+3])/m,(h*f[e+4]+l*f[e+5]+k*f[e+6]+f[e+7])/m,(h*f[e+8]+l*f[e+9]+k*f[e+10]+f[e+11])/m)};b.Vector3.mulMatrix4x4Axisv=function(a,g,c,d,f,e,h){null==h&&(h=!0);if(h){h=f[e+0];var l=f[e+1],k=f[e+2];b.Vector3.load(a,g,c[d+0]*h+c[d+4]*l+c[d+8]*k,c[d+1]*h+c[d+5]*l+c[d+9]*k,c[d+2]*h+c[d+6]*l+c[d+10]*k)}else h=c[d+0],l=c[d+1],k=c[d+2],b.Vector3.load(a,g,h*f[e+0]+l*f[e+1]+k*
f[e+2],h*f[e+4]+l*f[e+5]+k*f[e+6],h*f[e+8]+l*f[e+9]+k*f[e+10])};b.Vector3.div=function(a,g,c,d,f,e){b.Vector3.load(a,g,c*e,d*e,f*e)};b.Vector3.divv=function(a,g,c,d,f){b.Vector3.div(a,g,c[d+0],c[d+1],c[d+2],f)};b.Vector3.convertToString=function(a,b){return"Vector3("+a[b+0]+", "+a[b+1]+", "+a[b+2]+")"}})(xpl);(function(b){b.GLUtils=function(){throw Error("Unsupported operation");};Object.defineProperties(b.GLUtils,{TYPE_VERTEX_SHADER:{value:"OpenGL Vertex Shader"},TYPE_FRAGMENT_SHADER:{value:"OpenGL Fragment Shader"},TYPE_PROGRAM:{value:"OpenGL Program"}});b.GLUtils.createBuffer=function(a,b,c,d){if(b==a.ARRAY_BUFFER||b==a.ELEMENT_ARRAY_BUFFER){var f=a.createBuffer();null!=f&&(a.bindBuffer(b,f),a.bufferData(b,c,d));return f}return null};b.GLUtils.createTexture2D=function(a,g,c,d,f,e,h,l,k){var m=a.createTexture();
if(null!=m){a.bindTexture(a.TEXTURE_2D,m);var n=b.MathUtils.cailPow2(d),p=b.MathUtils.cailPow2(f);d==n&&f==p?(a.pixelStorei(a.UNPACK_ALIGNMENT,1),a.texImage2D(a.TEXTURE_2D,0,g,n,p,0,g,c,e)):(a.pixelStorei(a.UNPACK_ALIGNMENT,1),a.texImage2D(a.TEXTURE_2D,0,g,texWidth,texHeight,0,g,c,null),null!=e&&a.texSubImage2D(a.TEXTURE_2D,0,0,0,d,f,g,c,e));h&&a.generateMipmap(a.TEXTURE_2D);null!=l&&(l[k+0]=n,l[k+1]=p)}return m};b.GLUtils.createTexture2DFromImage=function(a,b,c,d){var f=a.createTexture();null!=f&&
(a.bindTexture(a.TEXTURE_2D,f),a.texImage2D(a.TEXTURE_2D,0,b,b,c,d));return f};b.GLUtils.createShader=function(a,g,c,d){if(g==a.VERTEX_SHADER||g==a.FRAGMENT_SHADER){var f=a.createShader(g);return null==f||(a.shaderSource(f,c),a.compileShader(f),a.getShaderParameter(f,a.COMPILE_STATUS))?f:(c=a.getShaderInfoLog(f),console.error("Shader compile error:\n"+c),null!=d&&(g==a.VERTEX_SHADER?d(b.GLUtils.TYPE_VERTEX_SHADER,c):g==a.FRAGMENT_SHADER&&d(b.GLUtils.TYPE_FRAGMENT_SHADER,+c)),a.deleteShader(f),null)}return null};
b.GLUtils.createProgram=function(a,g,c,d,f){if(null!=g&&null!=c){var e=a.createProgram();if(null!=e){a.attachShader(e,g);a.attachShader(e,c);if(null!=d)for(var h in d)a.bindAttribLocation(e,d[h],h);a.linkProgram(e);if(!a.getProgramParameter(e,a.LINK_STATUS))return g=a.getProgramInfoLog(e),console.error("Program linkage error:\n"+g),null!=f&&f(b.GLUtils.TYPE_PROGRAM,g),a.deleteProgram(e),null}return e}return null};b.GLUtils.createShaderProgram=function(a,g,c,d,f){g=b.GLUtils.createShader(a,a.VERTEX_SHADER,
g,f);if(null==g)return null;c=b.GLUtils.createShader(a,a.FRAGMENT_SHADER,c,f);if(null==c)return a.deleteShader(g),null;d=b.GLUtils.createProgram(a,g,c,d,f);a.deleteShader(g);a.deleteShader(c);return d}})(xpl);(function(b){var a=1;b.XModelStructure=function(b){this.structure_type=b;var c=a++;this.valueOf=function(){return c};this.hashCode=function(){return c}};b.XModelStructure.prototype.equals=function(a){return this==a};Object.defineProperties(b.XModelStructure,{TYPE_UNDEFINED:{value:-1},TYPE_NULL:{value:0},TYPE_AXIS_ROTATE:{value:1},TYPE_QUATERNION:{value:2},TYPE_SCALE:{value:3},TYPE_TRANSLATE:{value:4},TYPE_MATRIX:{value:5},TYPE_CONTAINER:{value:6},TYPE_TEXTURE:{value:7},TYPE_MATERIAL:{value:8},TYPE_MESH:{value:9},
TYPE_MESH_SUBSET:{value:15},TYPE_NODE:{value:10},TYPE_IK:{value:11},TYPE_ANIMATION:{value:12},TYPE_ANIMATION_KEY:{value:13},TYPE_ANIMATION_SET:{value:14},SIZE_RGBA:{value:4},SIZE_VECTOR_3:{value:3},SIZE_AXIS_ROTATE:{value:4},SIZE_QUATERNION:{value:4},SIZE_SCALE:{value:3},SIZE_TRANSLATE:{value:3},SIZE_MATRIX:{value:16},NUM_BLEND_SLOT:{value:2}})})(xpl);(function(b){b.XModelUserData=function(){this.data_size=0;this.data=null}})(xpl);
(function(b){b.XModelTransform=function(a){b.XModelStructure.call(this,a)};Object.setPrototypeOf(b.XModelTransform.prototype,b.XModelStructure.prototype)})(xpl);
(function(b){b.XModelAxisRotate=function(){b.XModelTransform.call(this,b.XModelStructure.TYPE_AXIS_ROTATE);this.initial=new Float32Array([0,0,0,1]);this.value=new Float32Array([0,0,0,1,0,0,0,1])};Object.setPrototypeOf(b.XModelAxisRotate.prototype,b.XModelTransform.prototype);Object.defineProperties(b.XModelStructure,{ANGLE:{value:0},X:{value:1},Y:{value:2},Z:{value:3}})})(xpl);
(function(b){b.XModelQuaternion=function(){b.XModelTransform.call(this,b.XModelStructure.TYPE_QUATERNION);this.initial=new Float32Array([1,0,0,0]);this.value=new Float32Array([1,0,0,0,1,0,0,0])};Object.setPrototypeOf(b.XModelQuaternion.prototype,b.XModelTransform.prototype)})(xpl);
(function(b){b.XModelScale=function(){b.XModelTransform.call(this,b.XModelStructure.TYPE_SCALE);this.initial=new Float32Array([1,1,1]);this.value=new Float32Array([1,1,1,1,1,1])};Object.setPrototypeOf(b.XModelScale.prototype,b.XModelTransform.prototype)})(xpl);(function(b){b.XModelTranslate=function(){b.XModelTransform.call(this,b.XModelStructure.TYPE_TRANSLATE);this.initial=new Float32Array([0,0,0]);this.value=new Float32Array([0,0,0,0,0,0])};Object.setPrototypeOf(b.XModelTranslate.prototype,b.XModelTransform.prototype)})(xpl);
(function(b){b.XModelMatrix=function(){b.XModelTransform.call(this,b.XModelStructure.TYPE_MATRIX);this.initial=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.value=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};Object.setPrototypeOf(b.XModelMatrix.prototype,b.XModelTransform.prototype)})(xpl);
(function(b){b.XModelExtensible=function(a){b.XModelStructure.call(this,a);this.user_object=this.user_data=null};Object.setPrototypeOf(b.XModelExtensible.prototype,b.XModelStructure.prototype)})(xpl);
(function(b){b.XModelContainer=function(){b.XModelExtensible.call(this,b.XModelStructure.TYPE_CONTAINER);this.name=null;this.num_textures=0;this.textures=null;this.num_materials=0;this.materials=null;this.num_meshes=0;this.meshes=null;this.num_nodes=0;this.nodes=null;this.time_rate=1;this.num_animation_sets=0;this.animation_sets=null};Object.setPrototypeOf(b.XModelContainer.prototype,b.XModelExtensible.prototype);b.XModelContainer.prototype.toString=function(){return this.name}})(xpl);
(function(b){b.XModelTexture=function(){b.XModelExtensible.call(this,b.XModelStructure.TYPE_TEXTURE);this.ref=this.name=null;this.data_size=0;this.texture=this.data=null;this.z_size=this.y_size=this.x_size=0};Object.setPrototypeOf(b.XModelTexture.prototype,b.XModelExtensible.prototype);b.XModelTexture.prototype.toString=function(){return this.name}})(xpl);
(function(b){b.XModelMaterial=function(){b.XModelExtensible.call(this,b.XModelStructure.TYPE_MATERIAL);this.name=null;this.emissive=[0,0,0,1];this.ambient=[.1,.1,.1,1];this.diffuse=[1,1,1,1];this.specular=[.4,.4,.4,1];this.shininess=5;this.bump=1;this.bump_map=this.shininess_map=this.specular_map=this.diffuse_map=this.ambient_map=this.emissive_map=null;this.draw_mode=b.XModelMaterial.DRAW_MODE_FACE_FRONT_BITS};Object.setPrototypeOf(b.XModelMaterial.prototype,b.XModelExtensible.prototype);Object.defineProperties(b.XModelMaterial,
{DRAW_MODE_FACE_NONE_BITS:{value:0},DRAW_MODE_FACE_FRONT_BITS:{value:1},DRAW_MODE_FACE_BACK_BITS:{value:2},DRAW_MODE_FACE_FRONT_AND_BACK_BITS:{value:b.XModelMaterial.DRAW_MODE_FACE_FRONT_BITS|b.XModelMaterial.DRAW_MODE_FACE_BACK_BITS}});b.XModelMaterial.prototype.toString=function(){return this.name}})(xpl);(function(b){b.XModelMeshBase=function(a){b.XModelExtensible.call(this,a);this.element_buffer=this.vertex_array=this.vertex_buffer=null};Object.setPrototypeOf(b.XModelMeshBase.prototype,b.XModelExtensible.prototype)})(xpl);
(function(b){b.XModelMesh=function(){b.XModelMeshBase.call(this,b.XModelStructure.TYPE_MESH);this.name=null;this.position_size=this.num_positions=0;this.positions=null;this.normal_size=this.num_normals=0;this.normals=null;this.color_size=this.num_colors=0;this.colors=null;this.tex_coord_size=this.num_tex_coords=0;this.skin=this.tex_coords=null;this.num_vertices=0;this.vertices=null;this.num_materials=0;this.materials=null;this.num_elements=0;this.elements=null;this.num_subsets=0;this.parent=this.subsets=
null};Object.setPrototypeOf(b.XModelMesh.prototype,b.XModelMeshBase.prototype);b.XModelMesh.prototype.toString=function(){return this.name}})(xpl);(function(b){b.XModelMeshSubset=function(){b.XModelMeshBase.call(this,b.XModelStructure.TYPE_MESH_SUBSET);this.num_bones=0;this.bones=null;this.num_vertices=0;this.vertices=null;this.num_elements=0;this.elements=null};Object.setPrototypeOf(b.XModelMesh.prototype,b.XModelMeshBase.prototype)})(xpl);
(function(b){b.XModelSkin=function(){this.weighted_index_stride=this.num_weighted_indices=0;this.weights=this.indices=this.weighted_index_sizes=null;this.num_nodes=0;this.offset_quaternions=this.offset_matrices=this.nodes=null}})(xpl);
(function(b){b.XModelVertex=function(){this.skinning=this.tex_coord=this.color=this.normal=this.position=-1};b.XModelVertex.prototype.hashCode=function(){return this.position^this.normal^this.color^this.tex_coord^this.skinning};b.XModelVertex.prototype.equals=function(a){return this===a?!0:null!=a&&a instanceof b.XModelVertex?this.position==a.position&&this.normal==a.normal&&this.color==a.color&&this.tex_coord==a.tex_coord&&this.skinning==a.skinning:!1}})(xpl);
(function(b){b.XModelElement=function(){this.material=-1;this.num_vertices=0;this.vertices=null};b.XModelElement.prototype.hashCode=function(){for(var a=0,b=0;b<this.num_vertices;++b)a^=this.vertices[b];return this.material^this.num_vertices^a};b.XModelElement.prototype.equals=function(a){if(this===a)return!0;if(a&&a instanceof b.XModelElement){for(var g=0;g<this.num_vertices&&g<a.num_vertices;++g)if(this.vertices[g]!=a.vertices[g])return!1;return this.material==a.material&&this.num_vertices==a.num_vertices}return!1}})(xpl);
(function(b){b.XModelNode=function(){b.XModelExtensible.call(this,b.XModelStructure.TYPE_NODE);this.name=null;this.connected=!0;this.lock_axises=new Uint8Array([!1,!1,!1]);this.limit_angles=new Uint8Array([!1,!1,!1]);this.min_angles=new Float32Array([-Math.PI,-Math.PI,-Math.PI]);this.max_angles=new Float32Array([Math.PI,Math.PI,Math.PI]);this.bone_tail=new Float32Array([0,0,0]);this.transforms=[null,null,null,null];this.num_iks=0;this.iks=null;this.num_meshes=0;this.meshes=null;this.num_children=
0;this.parent=this.children=null;this.offset_matrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.combined_matrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};Object.setPrototypeOf(b.XModelNode.prototype,b.XModelExtensible.prototype);Object.defineProperties(b.XModelNode,{TRANSFORM_MATRIX:{value:0},TRANSFORM_TRANSLATE:{value:1},TRANSFORM_SCALE:{value:2},TRANSFORM_ROTATE:{value:3},NUM_TRANSFORMS:{value:4}});b.XModelNode.prototype.toString=function(){return this.name}})(xpl);
(function(b){b.XModelIK=function(){b.XModelStructure.call(this,b.XModelStructure.TYPE_IK);this.target=null;this.max_iterations=500;this.influence=this.chain_length=1};Object.setPrototypeOf(b.XModelIK.prototype,b.XModelStructure.prototype);b.XModelIK.prototype.toString=function(){return this.name}})(xpl);
(function(b){b.XModelAnimation=function(){b.XModelExtensible.call(this,b.XModelStructure.TYPE_ANIMATION);this.target=this.name=null;this.index=-1;this.num_keys=0;this.keys=null;this.num_children=0;this.children=null};Object.setPrototypeOf(b.XModelAnimation.prototype,b.XModelExtensible.prototype);b.XModelAnimation.prototype.toString=function(){return this.name}})(xpl);
(function(b){b.XModelAnimationKey=function(){b.XModelStructure.call(this,b.XModelStructure.TYPE_ANIMATION_KEY);this.interpolate=b.XModelAnimationKey.INTERPOLATE_UNKNOWN;this.value_size=this.after_time=this.before_time=this.time=0;this.after_value=this.before_value=this.value=null};Object.setPrototypeOf(b.XModelAnimationKey.prototype,b.XModelStructure.prototype);Object.defineProperties(b.XModelAnimationKey,{INTERPOLATE_UNKNOWN:{value:-1},INTERPOLATE_LINER:{value:0},INTERPOLATE_BEZIER:{value:1}})})(xpl);
(function(b){b.XModelAnimationSet=function(){b.XModelExtensible.call(this,b.XModelStructure.TYPE_ANIMATION_SET);this.name=null;this.num_animations=0;this.animations=null};Object.setPrototypeOf(b.XModelAnimationSet.prototype,b.XModelExtensible.prototype);b.XModelAnimationSet.prototype.toString=function(){return this.name}})(xpl);(function(b){b.XModelCodec=function(){};Object.defineProperties(b.XModelCodec,{CODE_NAME:{value:"EX-MACHINA"},MAGIC_NUMBER:{value:1633971576},END_OF_DATA:{value:1685614437},VERSION:{value:35},COMPATIBILITY_VERSION:{value:35},VERSION_NAME:{value:"0.9.90"},COMPATIBILITY_VERSION_NAME:{value:"0.9.90"}})})(xpl);(function(b){b.XModelDecoder=function(){this.__data_view=null;this.__data_offset=0;this.__weak_inst_map=this.__inst_map=null};Object.setPrototypeOf(b.XModelDecoder.prototype,b.XModelCodec.prototype);b.XModelDecoder.prototype.decode=function(a){this.__data_view=new DataView(a);this.__data_offset=0;this.__inst_map={};this.__weak_inst_map={};if(this._getInt32()!=b.XModelCodec.MAGIC_NUMBER||this._getInt32()<b.XModelCodec.COMPATIBILITY_VERSION)return this._recycle(),null;a=this._getInt32();a=this._createStructureProcedure(a);
this._getStructureProcedure(a);this._getInt32()!=b.XModelCodec.END_OF_DATA&&console.error("Warning! This data doesn't has a terminator in the binary!");this._recycle();return a};b.XModelDecoder.prototype._recycle=function(){this.__data_view=null;this.__data_offset=0;this.__weak_inst_map=this.__inst_map=null};b.XModelDecoder.prototype._getInt8=function(){var a=this.__data_view.getInt8(this.__data_offset);this.__data_offset+=1;return a};b.XModelDecoder.prototype._getUint8=function(){var a=this.__data_view.getUint8(this.__data_offset);
this.__data_offset+=1;return a};b.XModelDecoder.prototype._getInt16=function(){var a=this.__data_view.getInt16(this.__data_offset,!0);this.__data_offset+=2;return a};b.XModelDecoder.prototype._getInt32=function(){var a=this.__data_view.getInt32(this.__data_offset,!0);this.__data_offset+=4;return a};b.XModelDecoder.prototype._getFloat32=function(){var a=this.__data_view.getFloat32(this.__data_offset,!0);this.__data_offset+=4;return a};b.XModelDecoder.prototype._getFloat64=function(){var a=this.__data_view.getFloat64(this.__data_offset,
!0);this.__data_offset+=8;return a};b.XModelDecoder.prototype._getInt8Array=function(a,b,c){for(var d=0;d<c;++d)a[b+d]=this._getInt8()};b.XModelDecoder.prototype._getUint8Array=function(a,b,c){for(var d=0;d<c;++d)a[b+d]=this._getUint8()};b.XModelDecoder.prototype._getInt16Array=function(a,b,c){for(var d=0;d<c;++d)a[b+d]=this._getInt16()};b.XModelDecoder.prototype._getInt32Array=function(a,b,c){for(var d=0;d<c;++d)a[b+d]=this._getInt32()};b.XModelDecoder.prototype._getFloat32Array=function(a,b,c){for(var d=
0;d<c;++d)a[b+d]=this._getFloat32()};b.XModelDecoder.prototype._getFloat64Array=function(a,b,c){for(var d=0;d<c;++d)a[b+d]=this._getFloat64()};b.XModelDecoder.prototype._getBool=function(){return 0!=this._getInt8()};b.XModelDecoder.prototype._getBoolArray=function(a,b,c){for(var d=0;d<c;++d)a[b+d]=this._getBool()};b.XModelDecoder.prototype._getString=function(){var a=this._getInt16();if(0<a){var g=Array(a);this._getUint8Array(g,0,a);return b.StringUtils.decodeUTF8(g)}return null};b.XModelDecoder.prototype._getStringArray=
function(a,b,c){for(var d=0;d<c;++d)a[b+d]=this._getString()};b.XModelDecoder.prototype._getStructure=function(){var a=this._getInt32();if(0==a)return null;var b=this._getInt32(),c=this.__inst_map[a];if(null!=c)return c;c=this.__weak_inst_map[a];null!=c?delete this.__weak_inst_map[a]:c=this._createStructureProcedure(b);this.__inst_map[a]=c;this._getStructureProcedure(c);return c};b.XModelDecoder.prototype._getStructureArray=function(a,b,c){for(var d=0;d<c;++d)a[b++]=this._getStructure()};b.XModelDecoder.prototype._getStructureRef=
function(){var a=this._getInt32();if(0==a)return null;var b=this._getInt32(),c=this.__inst_map[a]|this.__weak_inst_map[a];if(null!=c)return c;c=this._createStructureProcedure(b);this.__weak_inst_map[a]=c};b.XModelDecoder.prototype._getStructureRefArray=function(a,b,c){for(var d=0;d<c;++d)a[b++]=this._getStructRef()};b.XModelDecoder.prototype._createStructureProcedure=function(a){switch(a){case b.XModelStructure.TYPE_AXIS_ROTATE:return new b.XModelAxisRotate;case b.XModelStructure.TYPE_QUATERNION:return new b.XModelQuaternion;
case b.XModelStructure.TYPE_SCALE:return new b.XModelScale;case b.XModelStructure.TYPE_TRANSLATE:return new b.XModelTranslate;case b.XModelStructure.TYPE_MATRIX:return new b.XModelMatrix;case b.XModelStructure.TYPE_CONTAINER:return new b.XModelContainer;case b.XModelStructure.TYPE_TEXTURE:return new b.XModelTexture;case b.XModelStructure.TYPE_MATERIAL:return new b.XModelMaterial;case b.XModelStructure.TYPE_MESH:return new b.XModelMesh;case b.XModelStructure.TYPE_NODE:return new b.XModelNode;case b.XModelStructure.TYPE_IK:return new b.XModelIK;
case b.XModelStructure.TYPE_ANIMATION:return new b.XModelAnimation;case b.XModelStructure.TYPE_ANIMATION_KEY:return new b.XModelAnimationKey;case b.XModelStructure.TYPE_ANIMATION_SET:return new b.XModelAnimationSet}return null};b.XModelDecoder.prototype._getStructureProcedure=function(a){switch(a.structure_type){case b.XModelStructure.TYPE_AXIS_ROTATE:return this._getAxisRotate(a),!0;case b.XModelStructure.TYPE_QUATERNION:return this._getQuaternion(a),!0;case b.XModelStructure.TYPE_SCALE:return this._getScale(a),
!0;case b.XModelStructure.TYPE_TRANSLATE:return this._getTranslate(a),!0;case b.XModelStructure.TYPE_MATRIX:return this._getMatrix(a),!0;case b.XModelStructure.TYPE_CONTAINER:return this._getContainer(a),!0;case b.XModelStructure.TYPE_TEXTURE:return this._getTexture(a),!0;case b.XModelStructure.TYPE_MATERIAL:return this._getMaterial(a),!0;case b.XModelStructure.TYPE_MESH:return this._getMesh(a),!0;case b.XModelStructure.TYPE_NODE:return this._getNode(a),!0;case b.XModelStructure.TYPE_IK:return this._getIK(a),
!0;case b.XModelStructure.TYPE_ANIMATION:return this._getAnimation(a),!0;case b.XModelStructure.TYPE_ANIMATION_KEY:return this._getAnimationKey(a),!0;case b.XModelStructure.TYPE_ANIMATION_SET:return this._getAnimationSet(a),!0}return!1};b.XModelDecoder.prototype._getUserData=function(){this._getInt32();return null};b.XModelDecoder.prototype._getAxisRotate=function(a){this._getFloat32Array(a.initial,0,b.XModelStructure.SIZE_AXIS_ROTATE);ArrayUtils.copy(a.initial,0,a.value,0,b.XModelStructure.SIZE_AXIS_ROTATE)};
b.XModelDecoder.prototype._getQuaternion=function(a){this._getFloat32Array(a.initial,0,b.XModelStructure.SIZE_QUATERNION);b.ArrayUtils.copy(a.initial,0,a.value,0,b.XModelStructure.SIZE_QUATERNION)};b.XModelDecoder.prototype._getScale=function(a){this._getFloat32Array(a.initial,0,b.XModelStructure.SIZE_SCALE);b.ArrayUtils.copy(a.initial,0,a.value,0,b.XModelStructure.SIZE_SCALE)};b.XModelDecoder.prototype._getTranslate=function(a){this._getFloat32Array(a.initial,0,b.XModelStructure.SIZE_TRANSLATE);
b.ArrayUtils.copy(a.initial,0,a.value,0,b.XModelStructure.SIZE_TRANSLATE)};b.XModelDecoder.prototype._getMatrix=function(a){this._getFloat32Array(a.initial,0,b.XModelStructure.SIZE_MATRIX);b.ArrayUtils.copy(a.initial,0,a.value,0,b.XModelStructure.SIZE_MATRIX)};b.XModelDecoder.prototype._getContainer=function(a){a.name=this._getString();a.num_textures=this._getInt16();0<a.num_textures&&(a.textures=Array(a.num_textures),this._getStructureArray(a.textures,0,a.num_textures));a.num_materials=this._getInt16();
0<a.num_materials&&(a.materials=Array(a.num_materials),this._getStructureArray(a.materials,0,a.num_materials));a.num_meshes=this._getInt16();0<a.num_meshes&&(a.meshes=Array(a.num_meshes),this._getStructureArray(a.meshes,0,a.num_meshes));a.num_nodes=this._getInt16();0<a.num_nodes&&(a.nodes=Array(a.num_nodes),this._getStructureArray(a.nodes,0,a.num_nodes));a.time_rate=this._getFloat64();a.num_animation_sets=this._getInt16();0<a.num_animation_sets&&(a.animation_sets=Array(a.num_animation_sets),this._getStructureArray(a.animation_sets,
0,a.num_animation_sets));a.userData=this._getUserData()};b.XModelDecoder.prototype._getTexture=function(a){a.name=this._getString();a.ref=this._getString();a.data_size=this._getInt32();0<a.data_size&&(a.data=new Int8Array(a.data_size),this._getInt8Array(a.data,0,a.data_size));a.user_data=this._getUserData()};b.XModelDecoder.prototype._getMaterial=function(a){a.name=this._getString();this._getFloat32Array(a.emissive,0,b.XModelStructure.SIZE_RGBA);this._getFloat32Array(a.ambient,0,b.XModelStructure.SIZE_RGBA);
this._getFloat32Array(a.diffuse,0,b.XModelStructure.SIZE_RGBA);this._getFloat32Array(a.specular,0,b.XModelStructure.SIZE_RGBA);a.shininess=this._getFloat32();a.bump=this._getFloat32();a.emissive_map=this._getStructure();a.ambient_map=this._getStructure();a.diffuse_map=this._getStructure();a.specular_map=this._getStructure();a.shininess_map=this._getStructure();a.bump_map=this._getStructure();a.draw_mode=this._getInt32();a.user_data=this._getUserData()};b.XModelDecoder.prototype._getMesh=function(a){a.name=
this._getString();a.num_positions=this._getInt32();if(0<a.num_positions){a.position_size=this._getInt8();var g=a.position_size*a.num_positions;a.positions=new Float32Array(g);this._getFloat32Array(a.positions,0,g)}a.num_normals=this._getInt32();0<a.num_normals&&(a.normal_size=this._getInt8(),g=a.normal_size*a.num_normals,a.normals=new Float32Array(g),this._getFloat32Array(a.normals,0,g));a.num_colors=this._getInt32();0<a.num_colors&&(a.color_size=this._getInt8(),g=a.color_size*a.num_colors,a.colors=
new Float32Array(g),this._getFloat32Array(a.colors,0,g));a.num_tex_coords=this._getInt32();0<a.num_tex_coords&&(a.tex_coord_size=this._getInt8(),g=a.tex_coord_size*a.num_tex_coords,a.tex_coords=new Float32Array(g),this._getFloat32Array(a.tex_coords,0,g));var c=this._getBool();c&&(a.skin=new b.XModelSkin,this._getSkin(a.skin));a.num_vertices=this._getInt32();if(0<a.num_vertices)for(a.vertices=Array(a.num_vertices),g=0;g<a.num_vertices;++g){var d=new b.XModelVertex;this._getVertex(d,a.num_positions,
a.num_normals,a.num_colors,a.num_tex_coords,c);a.vertices[g]=d}a.num_materials=this._getInt16();0<a.num_materials&&(a.materials=Array(a.num_materials),this._getStructureArray(a.materials,0,a.num_materials));a.num_elements=this._getInt32();if(0<a.num_elements)for(a.elements=Array(a.num_elements),g=0;g<a.num_elements;++g)c=new b.XModelElement,this._getElement(c),a.elements[g]=c;a.user_data=this._getUserData()};b.XModelDecoder.prototype._getSkin=function(a){a.num_weighted_indices=this._getInt32();a.weighted_index_stride=
this._getInt8();if(0<a.num_weighted_indices){a.weighted_index_sizes=new Uint8Array(a.num_weighted_indices);var g=a.weighted_index_stride*a.num_weighted_indices;a.indices=new Int16Array(g);a.weights=new Float32Array(g);for(var c=0;c<g;++c)a.indices[c]=-1,a.weights[c]=0;b.ArrayUtils.fill(a.indices,0,g,-1);b.ArrayUtils.fill(a.weights,0,g,0);for(g=c=0;c<a.num_weighted_indices;++c,g+=a.weighted_index_stride){var d=this._getInt8();a.weighted_index_sizes[c]=d;for(var f=0;f<d;++f){var e=g+f;a.indices[e]=
this._getInt16();a.weights[e]=this._getFloat32()}}}a.num_nodes=this._getInt16();0<a.num_nodes&&(a.nodes=Array(a.num_nodes),this._getStructureArray(a.nodes,0,a.num_nodes),c=b.XModelStructure.SIZE_MATRIX*a.num_nodes,a.offset_matrices=new Float32Array(c),this._getFloat32Array(a.offset_matrices,0,c),c=b.XModelStructure.SIZE_QUATERNION*a.num_nodes,a.offset_quaternions=new Float32Array(c),this._getFloat32Array(a.offset_quaternions,0,c))};b.XModelDecoder.prototype._getVertex=function(a,b,c,d,f,e){0<b&&(a.position=
this._getInt32());0<c&&(a.normal=this._getInt32());0<d&&(a.color=this._getInt32());0<f&&(a.tex_coord=this._getInt32());e&&(a.skinning=this._getInt32())};b.XModelDecoder.prototype._getElement=function(a){a.material=this._getInt16();a.num_vertices=this._getInt8();0<a.num_vertices&&(a.vertices=new Uint32Array(a.num_vertices),this._getInt32Array(a.vertices,0,a.num_vertices))};b.XModelDecoder.prototype._getNode=function(a){a.name=this._getString();a.connected=this._getBool();this._getBoolArray(a.lock_axises,
0,b.XModelStructure.SIZE_VECTOR_3);this._getBoolArray(a.limit_angles,0,b.XModelStructure.SIZE_VECTOR_3);this._getFloat32Array(a.min_angles,0,b.XModelStructure.SIZE_VECTOR_3);this._getFloat32Array(a.max_angles,0,b.XModelStructure.SIZE_VECTOR_3);this._getFloat32Array(a.bone_tail,0,b.XModelStructure.SIZE_VECTOR_3);this._getStructureArray(a.transforms,0,b.XModelNode.NUM_TRANSFORMS);a.num_iks=this._getInt16();0<a.num_iks&&(a.iks=Array(a.num_iks),this._getStructureArray(a.iks,0,a.num_iks));a.num_meshes=
this._getInt16();if(0<a.num_meshes){a.meshes=Array(a.num_meshes);this._getStructureArray(a.meshes,0,a.num_meshes);for(var g=0;g<a.num_meshes;++g){var c=a.meshes[g];null!=c&&(c.parent=a)}}a.num_children=this._getInt16();if(0<a.num_children)for(a.children=Array(a.num_children),this._getStructureArray(a.children,0,a.num_children),g=0;g<a.num_children;++g)c=a.children[g],null!=c&&(c.parent=a);a.user_data=this._getUserData()};b.XModelDecoder.prototype._getIK=function(a){a.target=this._getStructure();a.max_iterations=
this._getInt16();a.chain_length=this._getInt16();a.influence=this._getFloat32()};b.XModelDecoder.prototype._getAnimation=function(a){a.name=this._getString();a.target=this._getStructure();a.index=this._getInt16();a.num_keys=this._getInt16();0<a.num_keys&&(a.keys=Array(a.num_keys),this._getStructureArray(a.keys,0,a.num_keys));a.num_children=this._getInt16();0<a.num_children&&(a.children=Array(a.num_children),this._getStructureArray(a.children,0,a.num_children));a.user_data=this._getUserData()};b.XModelDecoder.prototype._getAnimationKey=
function(a){a.interpolate=this._getInt8();a.time=this._getFloat64();a.value_size=this._getInt16();0<a.value_size&&(a.value=new Float32Array(a.value_size),this._getFloat32Array(a.value,0,a.value_size))};b.XModelDecoder.prototype._getAnimationSet=function(a){a.name=this._getString();a.num_animations=this._getInt16();0<a.num_animations&&(a.animations=Array(a.num_animations),this._getStructureArray(a.animations,0,a.num_animations));a.user_data=this._getUserData()}})(xpl);(function(b){b.XModelMaterialUtils=function(){throw Error("Unsupported operation");};b.XModelMaterialUtils.getTextures=function(a,b,c,d){var f=0;null!=a&&(a.emissive_map&&(b&&0<d&&(b[c++]=a.emissive_map,d--),f++),a.ambient_map&&(b&&0<d&&(b[c++]=a.ambient_map,d--),f++),a.diffuse_map&&(b&&0<d&&(b[c++]=a.diffuse_map,d--),f++),a.specular_map&&(b&&0<d&&(b[c++]=a.specular_map,d--),f++),a.shininess_map&&(b&&0<d&&(b[c++]=a.shininess_map,d--),f++),a.bump_map&&(b&&0<d&&(b[c++]=a.bump_map),f++));return f};b.XModelMaterialUtils.releaseTexture=
function(a){null!=a&&(a.emissive_map&&(a.emissive_map.data=null,a.emissive_map.data_size=0),a.ambient_map&&(a.ambient_map.data=null,a.ambient_map.data_size=0),a.diffuse_map&&(a.diffuse_map.data=null,a.diffuse_map.data_size=0),a.specular_map&&(a.specular_map.data=null,a.specular_map.data_size=0),a.shininess_map&&(a.shininess_map.data=null,a.shininess_map.data_size=0),a.bump_map&&(a.bump_map.data=null,a.bump_map.data_size=0))}})(xpl);(function(b){b.XModelMeshUtils=function(){throw Error("Unsupported operation");};Object.defineProperties(b.XModelMeshUtils,{ATTRIBUTE_STRUCTURE_SIZE:{value:0},ATTRIBUTE_POSITION:{value:1},ATTRIBUTE_NORMAL:{value:2},ATTRIBUTE_COLOR:{value:3},ATTRIBUTE_TEXCOORD:{value:4},ATTRIBUTE_BONELENGTH:{value:5},ATTRIBUTE_BONEINDICES:{value:6},ATTRIBUTE_BONEWEIGHTS:{value:7},MAX_ATTRIBUTE:{value:8},TYPE_VOID:{value:0},TYPE_UNSIGNED_BYTE:{value:1},TYPE_UNSIGNED_SHORT:{value:2},TYPE_UNSIGNED_INT:{value:3},TYPE_FLOAT:{value:4}});
b.XModelMeshUtils.getPositions=function(a,b,c,d,f,e){var h=0;if(null!=a&&null!=a.positions&&0<a.position_size){void 0===e&&(e=-1);c<b&&(c=b);var l;-1==e?(e=null,l=a.num_vertices):(e=a.subsets[e],l=e.num_vertices);for(var k=0;k<l;++k){var m=a.vertices[null==e?k:e.vertices[k]];if(-1!=m.position)for(var m=a.position_size*m.position,n=0;n<b&&n<a.position_size;++n)d[f+n]=a.positions[m++],h++;else n=0;for(;n<b;++n)d[f+n]=0,h++;f+=c}}return h};b.XModelMeshUtils.getNormals=function(a,b,c,d,f,e){var h=0;if(null!=
a&&null!=a.normals&&0<a.normal_size){void 0===e&&(e=-1);c<b&&(c=b);var l;-1==e?(e=null,l=a.num_vertices):(e=a.subsets[e],l=e.num_vertices);for(var k=0;k<l;++k){var m=a.vertices[null==e?k:e.vertices[k]];if(-1!=m.normal)for(var m=a.normal_size*m.normal,n=0;n<b&&n<a.normal_size;++n)d[f+n]=a.normals[m++],h++;else n=0;for(;n<b;++n)d[f+n]=0,h++;f+=c}}return h};b.XModelMeshUtils.getColors=function(a,b,c,d,f,e){var h=0;if(null!=a&&null!=a.colors&&0<a.color_size){void 0===e&&(e=-1);c<b&&(c=b);var l;-1==e?
(e=null,l=a.num_vertices):(e=a.subsets[e],l=e.num_vertices);for(var k=d instanceof Uint8Array||d instanceof Int8Array?255:1,m=0;m<l;++m){var n=a.vertices[null==e?m:e.vertices[m]];if(-1!=n.color)for(var n=a.color_size*n.color,p=0;p<b&&p<a.color_size;++p)d[f+p]=a.colors[n++]*k,h++;else p=0;for(;p<b;++p)d[f+p]=0,h++;f+=c}}return h};b.XModelMeshUtils.getTexCoords=function(a,b,c,d,f,e){var h=0;if(null!=a&&null!=a.tex_coords&&0<a.tex_coord_size){void 0===e&&(e=-1);c<b&&(c=b);var l;-1==e?(e=null,l=a.num_vertices):
(e=a.subsets[e],l=e.num_vertices);for(var k=0;k<l;++k){var m=a.vertices[null==e?k:e.vertices[k]];if(-1!=m.tex_coord)for(var m=a.tex_coord_size*m.tex_coord,n=0;n<b&&n<a.tex_coord_size;++n)d[f+n]=a.tex_coords[m++],h++;else n=0;for(;n<b;++n)d[f+n]=0,h++;f+=c}}return h};b.XModelMeshUtils.getSkinBoneLengths=function(a,b,c,d,f){if(null!=a&&null!=a.skin&&1<a.skin.weighted_index_stride){void 0===f&&(f=-1);-1==f?(b=null,f=a.num_vertices):(b=a.subsets[f],f=b.num_vertices);for(var e=0;e<f;++e){var h=a.vertices[null==
b?e:b.vertices[e]];c[d]=-1!=h.skinning?a.skin.weighted_index_sizes[h.skinning]:0}}return 0};b.XModelMeshUtils.getSkinBoneIndices=function(a,g,c,d,f,e){var h=0;if(null!=a&&null!=a.skin&&0<a.skin.weighted_index_stride){void 0===e&&(e=-1);c<g&&(c=g);var l;-1==e?(e=null,l=a.num_vertices):(e=a.subsets[e],l=e.num_vertices);for(var k=0;k<l;++k){var m=a.vertices[null==e?k:e.vertices[k]];if(-1!=m.skinning)for(var n=a.skin.weighted_index_sizes[m.skinning],m=a.skin.weighted_index_stride*m.skinning,p=0;p<g&&
p<n&&a.skin.weighted_index_stride;++p){if(null==e)d[f+p]=a.skin.indices[m++];else{var q=b.ArrayUtils.binarySearch(e.bones,0,e.num_bones,a.skin.indices[m++]);d[f+p]=0<=q?q:0}h++}else p=0;for(;p<g;++p)d[f+p]=0,h++;f+=c}}return h};b.XModelMeshUtils.getSkinBoneWeights=function(a,b,c,d,f,e){var h=0;if(null!=a&&null!=a.skin&&0<a.skin.weighted_index_stride){void 0===e&&(e=-1);c<b&&(c=b);var l;-1==e?(e=null,l=a.num_vertices):(e=a.subsets[e],l=e.num_vertices);for(var k=0;k<l;++k){var m=a.vertices[null==e?
k:e.vertices[k]];if(-1!=m.skinning)for(var n=a.skin.weighted_index_sizes[m.skinning],m=a.skin.weighted_index_stride*m.skinning,p=0;p<b&&p<n&&a.skin.weighted_index_stride;++p)d[f+p]=a.skin.weights[m++],h++;else p=0;for(;p<b;++p)d[f+p]=0,h++;f+=c}}return h};b.XModelMeshUtils.getVerticesSize=function(a,g,c,d,f,e,h,l,k,m,n,p,q){if(null!=a&&null!=a.vertices&&0<a.num_vertices){void 0===q&&(q=-1);null!=n&&b.ArrayUtils.fill(n,p,p+b.XModelMeshUtils.MAX_ATTRIBUTE,-1);var r=0,t=g?1:-1==q?a.num_vertices:a.subsets[q].num_vertices;
0<d&&0<a.position_size&&(null!=n&&(n[p+b.XModelMeshUtils.ATTRIBUTE_POSITION]=r),r+=t*a.position_size*d,r=c*Math.floor((r+c-1)/c));0<f&&0<a.normal_size&&(null!=n&&(n[p+b.XModelMeshUtils.ATTRIBUTE_NORMAL]=r),r+=t*a.normal_size*f,r=c*Math.floor((r+c-1)/c));0<e&&0<a.color_size&&(null!=n&&(n[p+b.XModelMeshUtils.ATTRIBUTE_COLOR]=r),r+=t*a.color_size*e,r=c*Math.floor((r+c-1)/c));0<h&&0<a.tex_coord_size&&(null!=n&&(n[p+b.XModelMeshUtils.ATTRIBUTE_TEXCOORD]=r),r+=t*a.tex_coord_size*h,r=c*Math.floor((r+c-1)/
c));null!=a.skin&&0<a.skin.weighted_index_stride&&(0<l&&(null!=n&&(n[p+b.XModelMeshUtils.ATTRIBUTE_BONELENGTH]=r),r=c*Math.floor((r+t*l+c-1)/c)),0<k&&(null!=n&&(n[p+b.XModelMeshUtils.ATTRIBUTE_BONEINDICES]=r),r+=t*a.skin.weighted_index_stride*k,r=c*Math.floor((r+c-1)/c)),0<m&&(null!=n&&(n[p+b.XModelMeshUtils.ATTRIBUTE_BONEWEIGHTS]=r),r+=t*a.skin.weighted_index_stride*m,r=c*Math.floor((r+c-1)/c)));if(g)return n[b.XModelMeshUtils.ATTRIBUTE_STRUCTURE_SIZE]=r,(-1==q?a.num_vertices:a.subsets[q].num_vertices)*
r;n[b.XModelMeshUtils.ATTRIBUTE_STRUCTURE_SIZE]=0;return r}return 0};b.XModelMeshUtils.getVertices=function(a,g,c,d,f,e,h,l,k,m,n,p,q){if(null!=a&&null!=a.vertices&&0<a.num_vertices){var r=k[m+b.XModelMeshUtils.ATTRIBUTE_STRUCTURE_SIZE],t;if(0<=k[m+b.XModelMeshUtils.ATTRIBUTE_POSITION])switch(t=p+k[m+b.XModelMeshUtils.ATTRIBUTE_POSITION],g){case b.XModelMeshUtils.TYPE_FLOAT:b.XModelMeshUtils.getPositions(a,a.position_size,r/4,new Float32Array(n,t,Math.floor((n.byteLength-t)/4)),0,q)}if(0<=k[m+b.XModelMeshUtils.ATTRIBUTE_NORMAL])switch(t=
p+k[m+b.XModelMeshUtils.ATTRIBUTE_NORMAL],c){case b.XModelMeshUtils.TYPE_FLOAT:b.XModelMeshUtils.getNormals(a,a.normal_size,r/4,new Float32Array(n,t,Math.floor((n.byteLength-t)/4)),0,q)}if(0<=k[m+b.XModelMeshUtils.ATTRIBUTE_COLOR])switch(t=p+k[m+b.XModelMeshUtils.ATTRIBUTE_COLOR],d){case b.XModelMeshUtils.TYPE_UNSIGNED_BYTE:b.XModelMeshUtils.getColors(a,a.color_size,r,new Uint8Array(n,t),0,q);break;case b.XModelMeshUtils.TYPE_FLOAT:b.XModelMeshUtils.getColors(a,a.color_size,r/4,new Float32Array(n,
t,Math.floor((n.byteLength-t)/4)),0,q)}if(0<=k[m+b.XModelMeshUtils.ATTRIBUTE_TEXCOORD])switch(t=p+k[m+b.XModelMeshUtils.ATTRIBUTE_TEXCOORD],f){case b.XModelMeshUtils.TYPE_FLOAT:b.XModelMeshUtils.getTexCoords(a,a.tex_coord_size,r/4,new Float32Array(n,t,Math.floor((n.byteLength-t)/4)),0,q)}if(null!=a.skin&&0<a.skin.weighted_index_stride){if(0<=k[m+b.XModelMeshUtils.ATTRIBUTE_BONELENGTH])switch(t=p+k[m+b.XModelMeshUtils.ATTRIBUTE_BONELENGTH],e){case b.XModelMeshUtils.TYPE_UNSIGNED_BYTE:b.XModelMeshUtils.getSkinBoneLengths(a,
r,new Uint8Array(n,t),0,q)}if(0<=k[m+b.XModelMeshUtils.ATTRIBUTE_BONEINDICES])switch(t=p+k[m+b.XModelMeshUtils.ATTRIBUTE_BONEINDICES],h){case b.XModelMeshUtils.TYPE_UNSIGNED_BYTE:b.XModelMeshUtils.getSkinBoneIndices(a,a.skin.weighted_index_stride,r,new Uint8Array(n,t),0,q);break;case b.XModelMeshUtils.TYPE_UNSIGNED_SHORT:b.XModelMeshUtils.getSkinBoneIndices(a,a.skin.weighted_index_stride,r/2,new Uint16Array(n,t,Math.floor((n.byteLength-t)/2)),0,q)}if(0<=k[m+b.XModelMeshUtils.ATTRIBUTE_BONEWEIGHTS])switch(t=
p+k[m+b.XModelMeshUtils.ATTRIBUTE_BONEWEIGHTS],l){case b.XModelMeshUtils.TYPE_FLOAT:b.XModelMeshUtils.getSkinBoneWeights(a,a.skin.weighted_index_stride,r/4,new Float32Array(n,t,Math.floor((n.byteLength-t)/4)),0,q)}}}};b.XModelMeshUtils.getNumTriangledFaceIndices=function(a,b,c){var d=0;if(null!=a){void 0===c&&(c=-1);-1!=c&&(a=a.subsets[c]);c=a.num_elements;a=a.elements;for(var f=0;f<c;++f){var e=a[f];e.material==b&&3<=e.num_vertices&&(d+=3*(e.num_vertices-2))}}return d};b.XModelMeshUtils.getNumAllTriangledFaceIndices=
function(a,g,c,d,f,e){var h=0;if(null!=a){for(var l=0;l<a.num_materials;++l){null!=g&&(g[c+l]=h);var k=b.XModelMeshUtils.getNumTriangledFaceIndices(a,l,e);null!=d&&(d[f+l]=k);h+=k}null!=g&&(g[c+a.num_materials]=h);k=b.XModelMeshUtils.getNumTriangledFaceIndices(a,-1,e);null!=d&&(d[f+a.num_materials]=k);h+=k}return h};b.XModelMeshUtils.getTriangledFaceIndices=function(a,b,c,d,f,e){var h=0;if(null!=a){void 0===e&&(e=-1);-1!=e&&(a=a.subsets[e]);e=a.num_elements;a=a.elements;var l,k;c?(c=0,l=2,k=1):(c=
0,l=1,k=2);for(var m=0;m<e;++m){var n=a[m];if(n.material==b)for(var p=0,q=n.num_vertices-2;p<q;++p)d[f+c]=n.vertices[0],d[f+l]=n.vertices[p+1],d[f+k]=n.vertices[p+2],f+=3,h+=3}}return h};b.XModelMeshUtils.getAllTriangledFaceIndices=function(a,g,c,d,f,e,h){var l=0;if(null!=a)for(var k=0;k<a.num_materials;++k)l+=b.XModelMeshUtils.getTriangledFaceIndices(a,k,g,f,e+c[d+k],h)};b.XModelMeshUtils.releaseShape=function(a){if(null!=a&&(a.positions=null,a.normals=null,a.colors=null,a.tex_coords=null,a.vertices=
null,null!=a.skin&&(a.skin.weighted_index_sizes=null,a.skin.indices=null,a.skin.weights=null),a.elements=null,null!=a.subsets))for(var b=0;b<a.num_subsets;++b){var c=a.subsets[b];c.vertices=null;c.elements=null}};b.XModelMeshUtils.getTextures=function(a,g,c,d){var f=0;if(null!=a)for(var e=0;e<a.num_materials;++e){var h=b.XModelMaterialUtils.getTextures(a.materials[e],g,c,d);c+=h;d-=h;f+=h}return f};b.XModelMeshUtils.releaseTextures=function(a){if(null!=a)for(var g=0;g<a.num_materials;++g)b.XModelMaterialUtils.releaseTexture(a.materials[g])}})(xpl);(function(b){var a=b.Geometry.SIZE_VECTOR_3,g=b.Geometry.SIZE_MATRIX_4X4;b.XModelSkinUtils=function(){throw Error("Unsupported operation");};b.XModelSkinUtils.updateMatrixPallet=function(a,d,f,e){if(null!=a){for(var h=0;h<a.num_nodes&&h<d;++h){var l=g*h,k=a.nodes[h];null!=k?b.Matrix4x4.mulv(f,e+l,k.combined_matrix,0,a.offset_matrices,l):b.Matrix4x4.loadIdentity(f,e+l)}return Math.min(a.num_nodes,d)}return 0};b.XModelSkinUtils.updatePositions=function(c,d,f,e,h,l,k,m,n,p,q,r,t,v,u,y){l<a&&(l=a);n<
a&&(n=a);y<p&&(y=p);t<p&&(t=p);if(1==p)for(var w=0;w<f;++w)b.Vector3.mulMatrix4x4v(k,m,c,d+g*q[r],e,h,!0),h+=l,m+=n,r+=t;else if(1<p)for(var A=new Float32Array(a),w=0;w<f;++w){b.Vector3.loadZero(k,m);for(var C=0;C<p;++C){var E=v[u+C];0<E&&(b.Vector3.mulMatrix4x4v(A,0,c,d+g*q[r+C],e,h,!0),b.Vector3.mulv(A,0,A,0,E),b.Vector3.addv(k,m,k,m,A,0))}h+=l;m+=n;r+=t;u+=y}};b.XModelSkinUtils.updateNormals=function(c,d,f,e,h,l,k,m,n,p,q,r,t,v,u,y){l<a&&(l=a);n<a&&(n=a);y<p&&(y=p);t<p&&(t=p);if(1==p)for(var w=
0;w<f;++w)b.Vector3.mulMatrix4x4Axisv(k,m,c,d+g*q[r],e,h),h+=l,m+=n,r+=t;else if(1<p)for(var A=new Float32Array(a),w=0;w<f;++w){b.Vector3.loadZero(k,m);for(var C=0;C<p;++C){var E=v[u+C];0<E&&(b.Vector3.mulMatrix4x4Axisv(A,0,c,d+g*q[r+C],e,h),b.Vector3.mulv(A,0,A,0,E),b.Vector3.addv(k,m,k,m,A,0))}h+=l;m+=n;r+=t;u+=y}}})(xpl);(function(b){b.XModelTransformUtils=function(){throw Error("Unsupported operation");};b.XModelTransformUtils.applyTransform=function(a,g,c){if(null!=a){var d;switch(a.structure_type){case b.XModelStructure.TYPE_AXIS_ROTATE:a=a.value;d=0*b.XModelStructure.SIZE_AXIS_ROTATE;b.Matrix4x4.mulRotate(g,c,a[d+b.XModelAxisRotate.X],a[d+b.XModelAxisRotate.Y],a[d+b.XModelAxisRotate.Z],a[d+b.XModelAxisRotate.ANGLE],!0,!0);break;case b.XModelStructure.TYPE_QUATERNION:a=a.value;d=0*b.XModelStructure.SIZE_QUATERNION;
b.Matrix4x4.mulQuaternionv(g,c,a,d,!0);break;case b.XModelStructure.TYPE_SCALE:a=a.value;d=0*b.XModelStructure.SIZE_SCALE;b.Matrix4x4.mulScale(g,c,a[d+b.Geometry.VX],a[d+b.Geometry.VY],a[d+b.Geometry.VZ]);break;case b.XModelStructure.TYPE_TRANSLATE:a=a.value;d=0*b.XModelStructure.SIZE_TRANSLATE;b.Matrix4x4.mulTranslate(g,c,a[d+b.Geometry.VX],a[d+b.Geometry.VY],a[d+b.Geometry.VZ],!0);break;case b.XModelStructure.TYPE_MATRIX:a=a.value,d=0*b.XModelStructure.SIZE_MATRIX,b.Matrix4x4.mulv(g,c,g,c,a,d)}}};
b.XModelTransformUtils.resetTransform=function(a){if(null!=a)switch(a.structure_type){case b.XModelStructure.TYPE_AXIS_ROTATE:b.ArrayUtils.copy(a.initial,0,a.value,0,b.XModelStructure.SIZE_AXIS_ROTATE);break;case b.XModelStructure.TYPE_QUATERNION:b.ArrayUtils.copy(a.initial,0,a.value,0,b.XModelStructure.SIZE_QUATERNION);break;case b.XModelStructure.TYPE_SCALE:b.ArrayUtils.copy(a.initial,0,a.value,0,b.XModelStructure.SIZE_SCALE);break;case b.XModelStructure.TYPE_TRANSLATE:b.ArrayUtils.copy(a.initial,
0,a.value,0,b.XModelStructure.SIZE_TRANSLATE);break;case b.XModelStructure.TYPE_MATRIX:b.ArrayUtils.copy(a.initial,0,a.value,0,b.XModelStructure.SIZE_MATRIX)}}})(xpl);(function(b){var a=b.Geometry.VX,g=b.Geometry.VY,c=b.Geometry.VZ,d=b.Geometry.CI,f=b.Geometry.CJ,e=b.Geometry.CK,h=b.Geometry.M4X4_00,l=b.Geometry.M4X4_01,k=b.Geometry.M4X4_02,m=b.Geometry.M4X4_03,n=b.Geometry.M4X4_10,p=b.Geometry.M4X4_11,q=b.Geometry.M4X4_12,r=b.Geometry.M4X4_13,t=b.Geometry.M4X4_20,v=b.Geometry.M4X4_21,u=b.Geometry.M4X4_22,y=b.Geometry.M4X4_23;b.XModelKinematicsUtils=function(){throw Error("Unsupported operation");};var w=function(a){this.node=a;this.local_transform=new Float32Array(b.XModelStructure.SIZE_MATRIX);
this.transform=new Float32Array(b.XModelStructure.SIZE_MATRIX);this.offset_transform=new Float32Array(b.XModelStructure.SIZE_MATRIX);this.rotate=new Float32Array(b.XModelStructure.SIZE_QUATERNION);this.min_sins=new Float32Array(b.XModelStructure.SIZE_VECTOR_3);this.max_sins=new Float32Array(b.XModelStructure.SIZE_VECTOR_3);b.Matrix4x4.loadIdentity(this.local_transform,0);for(a=0;a<b.XModelNode.TRANSFORM_ROTATE;++a)b.XModelTransformUtils.applyTransform(this.node.transforms[a],this.local_transform,
0);b.Matrix4x4.normalizeAxisv(this.local_transform,0,this.local_transform,0,!0);a=this.local_transform[h];var c=this.local_transform[l],d=this.local_transform[n],f=this.local_transform[p],e=this.local_transform[t],g=this.local_transform[v];0>(d*g-e*f)*this.local_transform[k]+(e*c-a*g)*this.local_transform[q]+(a*f-d*c)*this.local_transform[u]&&(this.local_transform[h]=-this.local_transform[h],this.local_transform[l]=-this.local_transform[l],this.local_transform[k]=-this.local_transform[k],this.local_transform[n]=
-this.local_transform[n],this.local_transform[p]=-this.local_transform[p],this.local_transform[q]=-this.local_transform[q],this.local_transform[t]=-this.local_transform[t],this.local_transform[v]=-this.local_transform[v],this.local_transform[u]=-this.local_transform[u]);a=this.node.transforms[b.XModelNode.TRANSFORM_ROTATE];a.structure_type==b.XModelStructure.TYPE_AXIS_ROTATE?b.Quaternion.loadRotate(this.rotate,0,a.value[b.XModelAxisRotate.X],a.value[b.XModelAxisRotate.Y],a.value[b.XModelAxisRotate.Z],
a.value[b.XModelAxisRotate.ANGLE],!0):a.structure_type==b.XModelStructure.TYPE_QUATERNION?(b.Quaternion.loadv(this.rotate,0,a.value,0),b.Quaternion.normalizev(this.rotate,0,this.rotate,0)):b.Quaternion.loadIdentity(this.rotate,0);for(a=0;a<b.XModelStructure.SIZE_VECTOR_3;++a)this.min_sins[a]=Math.sin(.5*this.node.min_angles[a]),this.max_sins[a]=Math.sin(.5*this.node.max_angles[a])};w.prototype.updateOffsetTransform=function(){var a=this.transform[h],c=this.transform[n],d=this.transform[t],f=this.transform[l],
e=this.transform[p],g=this.transform[v],w=this.transform[k],x=this.transform[q],I=this.transform[u],J=-this.transform[m],B=-this.transform[r],M=-this.transform[y];b.Matrix4x4.load(this.offset_transform,0,a,c,d,J*a+B*c+M*d,f,e,g,J*f+B*e+M*g,w,x,I,J*w+B*x+M*I,0,0,0,1,!1)};b.XModelKinematicsUtils.applyInverseKinematicesLocation=function(h,l,k,n,p){if(null!=h&&1<=n){for(var q=h,t=1;t<n&&null!=q.parent;)q=q.parent,t++;if(1==n||1>=t)k=1;n=Array(t);var x=h;for(h=0;h<t;++h)n[h]=new w(x),x=x.parent;var u=
new Float32Array(b.XModelStructure.SIZE_VECTOR_3),v=new Float32Array(b.XModelStructure.SIZE_QUATERNION),B=new Float32Array(b.XModelStructure.SIZE_QUATERNION),M=new Float32Array(b.XModelStructure.SIZE_QUATERNION),G=!1;for(h=0;h<k;++h){var x=n[0],K=t,G=n,z=G[K-1];null!=z.node.parent?b.Matrix4x4.mulv(z.transform,0,z.node.parent.combined_matrix,0,z.local_transform,0):b.Matrix4x4.loadv(z.transform,0,z.local_transform,0,!1);b.Matrix4x4.mulQuaternionv(z.transform,0,z.rotate,0,!0);z.updateOffsetTransform();
for(K-=2;0<=K;--K){var R=z,z=G[K];b.Matrix4x4.mulv(z.transform,0,R.transform,0,z.local_transform,0);b.Matrix4x4.mulQuaternionv(z.transform,0,z.rotate,0,!0);z.updateOffsetTransform()}b.Vector3.mulMatrix4x4v(u,0,x.transform,0,x.node.bone_tail,0,!0);x=u[a]-l[a];G=u[g]-l[g];z=u[c]-l[c];if(x*x+G*G+z*z<=p)break;G=!1;for(z=0;z<t;++z){var x=n[z],K=x.transform[m],R=x.transform[r],U=x.transform[y];b.Quaternion.loadRotateVector3(v,0,u[a]-K,u[g]-R,u[c]-U,!0,l[a]-K,l[g]-R,l[c]-U,!0,(z+1)/t*(h==k-1?1:.5));G&&(b.Quaternion.mulv(v,
0,v,0,M,0),G=!1);b.Quaternion.loadv(M,0,v,0);b.Vector3.mulMatrix4x4Axisv(v,d,x.offset_transform,0,v,d,!0);b.Quaternion.conjugatev(v,0,v,0);b.Quaternion.loadv(B,0,x.rotate,0);b.Quaternion.mulv(x.rotate,0,v,0,x.rotate,0);for(var N=0;N<b.XModelStructure.SIZE_VECTOR_3;++N)if(x.node.lock_axises[N])x.rotate[d+N]=0,G=!0;else{var W=x.rotate[d+N],P=b.MathUtils.mid(W,x.min_sins[N],x.max_sins[N]);W!=P&&(x.rotate[d+N]=P,G=!0)}G&&(b.Quaternion.normalizev(x.rotate,0,x.rotate,0),b.Quaternion.divv(v,0,x.rotate,0,
B,0));b.Quaternion.conjugatev(v,0,v,0);b.Vector3.sub(u,0,u[a],u[g],u[c],K,R,U);b.Vector3.mulMatrix4x4Axisv(v,d,x.transform,0,v,d,!0);b.Vector3.mulQuaternionv(u,0,v,0,u,0);b.Vector3.add(u,0,u[a],u[g],u[c],K,R,U);G&&b.Quaternion.divv(M,0,M,0,v,0)}}for(h=0;h<t;++h)x=n[h],l=x.node.transforms[b.XModelNode.TRANSFORM_ROTATE],l.structure_type==b.XModelStructure.TYPE_AXIS_ROTATE?(k=x.rotate[d],p=x.rotate[f],u=x.rotate[e],v=k*k+p*p+u*u,0<v&&(v=Math.sqrt(v),k/=v,p/=v,u/=v),l.value[b.XModelAxisRotate.ANGLE]=
Math.acos(x.rotation[b.Geometry.CR]),l.value[b.XModelAxisRotate.X]=k,l.value[b.XModelAxisRotate.Y]=p,l.value[b.XModelAxisRotate.Z]=u):l.structure_type==b.XModelStructure.TYPE_QUATERNION&&b.Quaternion.loadv(l.value,0,x.rotate,0);null!=q.parent?b.XModelNodeUtils.updateCombinationv(q,q.num_children,q.children,0,q.parent.combined_matrix,0):b.XModelNodeUtils.updateCombination(q)}};b.XModelKinematicsUtils.applyInverseKinematices=function(a,c,d,f,e){null!=a&&null!=c&&(e=new Float32Array(b.XModelStructure.SIZE_VECTOR_3),
b.Vector3.loadZero(e,0),b.Vector3.mulMatrix4x4v(e,0,c.combined_matrix,0,e,0,!0),b.XModelKinematicsUtils.applyInverseKinematicesLocation(a,e,d,f,1E-4))};b.XModelKinematicsUtils.applyCopyTransform=function(a,b){}})(xpl);(function(b){b.XModelAnimationUtils=function(){throw Error("Unsupported operation");};b.XModelAnimationUtils.setAnimation=function(a,g){if(null!=a){if(0<a.num_keys){var c,d,f;if(1==a.num_keys)c=a.keys[0],d=a.keys[0],f=0;else{a:{f=0;d=a.num_keys;for(d--;f<=d;){c=f+d>>1;var e=a.keys[c].time;if(e<g)f=c+1;else if(e>g)d=c-1;else{f=c;break a}}f=-(f+1)}0<=f?(c=a.keys[f],d=a.keys[f],f=0):-1!=f?(f=-(f+2),f<a.num_keys-1?(c=a.keys[f+0],d=a.keys[f+1],f=(g-c.time)/(d.time-c.time)):(c=a.keys[f],d=a.keys[f],f=0)):
(c=a.keys[0],d=a.keys[0],f=0)}switch(a.target.structure_type){case b.XModelStructure.TYPE_AXIS_ROTATE:e=a.target;0>=f?-1==a.index?(b.Vector3.loadv(e.value,0,c.value,0),e.value[b.XModelAxisRotate.ANGLE]=c.value[b.XModelAxisRotate.ANGLE]):e.value[a.index]=c.value[0]:-1==a.index?(b.Vector3.slerpv(e.value,0,c.value,0,d.value,0,f),e.value[b.XModelAxisRotate.ANGLE]=c.value[b.XModelAxisRotate.ANGLE]*(1-f)+d.value[b.XModelAxisRotate.ANGLE]*f):e.value[a.index]=c.value[0]*(1-f)+d.value[0]*f;break;case b.XModelStructure.TYPE_QUATERNION:e=
a.target;0>=f?-1==a.index?b.Quaternion.loadv(e.value,0,c.value,0):e.value[a.index]=c.value[0]:-1==a.index?b.Quaternion.slerpv(e.value,0,c.value,0,d.value,0,f):e.value[a.index]=c.value[0]*(1-f)+d.value[0]*f;break;case b.XModelStructure.TYPE_SCALE:e=a.target;0>=f?-1==a.index?b.Vector3.loadv(e.value,0,c.value,0):e.value[a.index]=c.value[0]:-1==a.index?b.Vector3.lerpv(e.value,0,c.value,0,d.value,0,f):e.value[a.index]=c.value[0]*(1-f)+d.value[0]*f;break;case b.XModelStructure.TYPE_TRANSLATE:e=a.target;
0>=f?-1==a.index?b.Vector3.loadv(e.value,0,c.value,0):e.value[a.index]=c.value[0]:-1==a.index?b.Vector3.lerpv(e.value,0,c.value,0,d.value,0,f):e.value[a.index]=c.value[0]*(1-f)+d.value[0]*f;break;case b.XModelStructure.TYPE_MATRIX:e=a.target,0>=f?-1==a.index?b.Matrix4x4.loadv(e.value,0,c.value,0):e.value[a.index]=c.value[0]:-1==a.index?b.Matrix4x4.slrepAxisAndLrepOtherv(e.value,0,c.value,0,d.value,0,f,!0):e.value[a.index]=c.value[0]*(1-f)+d.value[0]*f}}for(f=0;f<a.num_children;++f)b.XModelAnimation.setAnimation(a.children[f],
g)}};b.XModelAnimationUtils.setAnimationSet=function(a,g){if(null!=a)for(var c=0;c<a.num_animations;++c)b.XModelAnimationUtils.setAnimation(a.animations[c],g)};b.XModelAnimationUtils.getAnimationTotalTime=function(a){var g=0;if(null!=a){for(var c=0;c<a.num_keys;++c){var d=a.keys[a.num_keys-1].time;g<d&&(g=d)}for(c=0;c<a.num_children;++c)d=b.XModelAnimationUtils.getAnimationTotalTime(a.children[c]),g<d&&(g=d)}return g};b.XModelAnimationUtils.getAnimationSetTotalTime=function(a){var g=0;if(null!=a)for(var c=
0;c<a.num_animations;++c){var d=b.XModelAnimationUtils.getAnimationTotalTime(a.animations[c]);g<d&&(g=d)}return g}})(xpl);(function(b){b.XModelNodeUtils=function(){throw Error("Unsupported operation");};b.XModelNodeUtils.getTextures=function(a,g,c,d){var f=0;if(null!=a){for(var e=0;e<a.num_meshes;++e){var h=b.XModelMeshUtils.getTextures(a.meshes[e],g,c,d);c+=h;d-=h;f+=h}for(e=0;e<a.num_children;++e)h=b.XModelNodeUtils.getTextures(a.children[e],g,c,d),c+=h,d-=h,f+=h}return f};b.XModelNodeUtils.releaseTextures=function(a){if(null!=a){for(var g=0;g<a.num_meshes;++g)b.XModelMeshUtils.releaseTextures(a.meshes[g]);for(g=0;g<
a.num_children;++g)b.XModelNodeUtils.releaseTextures(a.children[g])}};b.XModelNodeUtils.getMeshes=function(a,g,c,d){var f=0;if(null!=a){for(var e=0;e<a.num_meshes;++e){var h=a.meshes[e];null!=h&&(null!=g&&0<d&&(g[c++]=h,d--),f++)}for(e=0;e<a.num_children;++e)h=b.XModelNodeUtils.getMeshes(a.children[e],g,c,d),c+=h,d-=h,f+=h}return f};b.XModelNodeUtils.releaseShapes=function(a){if(null!=a){for(var g=0;g<a.num_meshes;++g)b.XModelMeshUtils.releaseShape(a.meshes[g]);for(g=0;g<a.num_children;++g)b.XModelNodeUtils.releaseShapes(a.children[g])}};
b.XModelNodeUtils.getNodes=function(a,g,c,d){var f=0;if(null!=a){null!=g&&0<d&&(g[c++]=a,d--);f++;for(var e=0;e<a.num_children;++e){var h=b.XModelNodeUtils.getNodes(a.children[e],g,c,d);c+=h;d-=h;f+=h}}return f};b.XModelNodeUtils.updateParent=function(a,g){if(null!=a){a.parent=g;for(var c=0;c<a.num_meshes;++c)a.meshes[c].parent=a;for(c=0;c<a.num_children;++c)b.XModelNodeUtils.updateParent(a.children[c],a)}};b.XModelNodeUtils.updateCombinationp=function(a,g,c,d,f,e,h,l,k,m,n,p,q,r,t,v,u,y,w,A){if(null!=
a){b.Matrix4x4.load(a.combined_matrix,0,f,e,h,l,k,m,n,p,q,r,t,v,u,y,w,A);for(var C=0;C<b.XModelNode.NUM_TRANSFORMS;++C)b.XModelTransformUtils.applyTransform(a.transforms[C],a.combined_matrix,0);f=a.combined_matrix[b.Geometry.M4X4_00];e=a.combined_matrix[b.Geometry.M4X4_01];h=a.combined_matrix[b.Geometry.M4X4_02];l=a.combined_matrix[b.Geometry.M4X4_03];k=a.combined_matrix[b.Geometry.M4X4_10];m=a.combined_matrix[b.Geometry.M4X4_11];n=a.combined_matrix[b.Geometry.M4X4_12];p=a.combined_matrix[b.Geometry.M4X4_13];
q=a.combined_matrix[b.Geometry.M4X4_20];r=a.combined_matrix[b.Geometry.M4X4_21];t=a.combined_matrix[b.Geometry.M4X4_22];v=a.combined_matrix[b.Geometry.M4X4_23];u=a.combined_matrix[b.Geometry.M4X4_30];y=a.combined_matrix[b.Geometry.M4X4_31];w=a.combined_matrix[b.Geometry.M4X4_32];A=a.combined_matrix[b.Geometry.M4X4_33];for(C=0;C<g;++C)a=c[d+C],b.XModelNodeUtils.updateCombinationp(a,a.num_children,a.children,0,f,e,h,l,k,m,n,p,q,r,t,v,u,y,w,A)}};b.XModelNodeUtils.updateCombinationv=function(a,g,c,d,
f,e){b.XModelNodeUtils.updateCombinationp(a,g,c,d,f[e+b.Geometry.M4X4_00],f[e+b.Geometry.M4X4_01],f[e+b.Geometry.M4X4_02],f[e+b.Geometry.M4X4_03],f[e+b.Geometry.M4X4_10],f[e+b.Geometry.M4X4_11],f[e+b.Geometry.M4X4_12],f[e+b.Geometry.M4X4_13],f[e+b.Geometry.M4X4_20],f[e+b.Geometry.M4X4_21],f[e+b.Geometry.M4X4_22],f[e+b.Geometry.M4X4_23],f[e+b.Geometry.M4X4_30],f[e+b.Geometry.M4X4_31],f[e+b.Geometry.M4X4_32],f[e+b.Geometry.M4X4_33])};b.XModelNodeUtils.updateCombination=function(a,g,c,d){b.XModelNodeUtils.updateCombinationp(a,
g,c,d,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)};b.XModelNodeUtils.updateCombinationAllp=function(a,g,c,d,f,e,h,l,k,m,n,p,q,r,t,v,u){null!=a&&b.XModelNodeUtils.updateCombinationp(a,g,c,d,f,e,h,l,k,m,n,p,q,r,t,v,u)};b.XModelNodeUtils.updateCombinationAllv=function(a,g,c){null!=a&&b.XModelNodeUtils.updateCombinationp(a,a.num_children,a.children,0,g[c+b.Geometry.M4X4_00],g[c+b.Geometry.M4X4_01],g[c+b.Geometry.M4X4_02],g[c+b.Geometry.M4X4_03],g[c+b.Geometry.M4X4_10],g[c+b.Geometry.M4X4_11],g[c+b.Geometry.M4X4_12],
g[c+b.Geometry.M4X4_13],g[c+b.Geometry.M4X4_20],g[c+b.Geometry.M4X4_21],g[c+b.Geometry.M4X4_22],g[c+b.Geometry.M4X4_23],g[c+b.Geometry.M4X4_30],g[c+b.Geometry.M4X4_31],g[c+b.Geometry.M4X4_32],g[c+b.Geometry.M4X4_33])};b.XModelNodeUtils.updateCombinationAll=function(a){null!=a&&b.XModelNodeUtils.updateCombinationp(a,a.num_children,a.children,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)};b.XModelNodeUtils.updateOffset=function(a){if(null!=a){b.Matrix4x4.inversev(a.offset_matrix,0,a.combined_matrix,0);for(var g=
0;g<a.num_children;++g)b.XModelNodeUtils.updateOffset(a.children[g])}};b.XModelNodeUtils.applyKinematics=function(a){if(null!=a){for(var g=0;g<a.num_iks;++g){var c=a.iks[g];null!=c&&b.XModelKinematicsUtils.applyInverseKinematices(a,c.target,c.max_iterations,c.chain_length,1E-4*Math.PI)}for(g=0;g<a.num_children;++g)b.XModelNodeUtils.applyKinematics(a.children[g])}};b.XModelNodeUtils.resetTransforms=function(a){if(null!=a){for(var g=0;g<b.XModelNode.NUM_TRANSFORMS;++g)b.XModelTransformUtils.resetTransform(a.transforms[g]);
for(g=0;g<a.num_children;++g)b.XModelNodeUtils.resetTransforms(a.children[g])}};b.XModelNodeUtils.forEachMesh=function(a,g,c){if(null!=a){for(var d=0;d<a.num_meshes;++d){var f=a.meshes[d];null!=f&&g(f,c)}for(d=0;d<a.num_children;++d)b.XModelNodeUtils.forEachMesh(a.children[d],g,c)}};b.XModelNodeUtils.forEachNode=function(a,g,c,d){if(null!=a){g(a,c,d);c+=1;for(var f=0;f<a.num_children;++f)b.XModelNodeUtils.forEachNode(a.children[f],g,c,d)}}})(xpl);(function(b){b.XModelContainerUtils=function(){throw Error("Unsupported operation");};b.XModelContainerUtils.getTextures=function(a,g,c,d){var f=0;if(null!=a){for(var e=0;e<a.num_textures;++e){var h=a.textures[e];null!=h&&(null!=g&&0<d&&(g[c++]=h,d--),f++)}for(e=0;e<a.num_materials;++e)h=b.XModelMaterialUtils.getTextures(a.materials[e],g,c,d),c+=h,d-=h,f+=h;for(e=0;e<a.num_meshes;++e)h=b.XModelMeshUtils.getTextures(a.meshes[e],g,c,d),c+=h,d-=h,f+=h;for(e=0;e<a.num_nodes;++e)h=b.XModelNodeUtils.getTextures(a.nodes[e],
g,c,d),c+=h,d-=h,f+=h}return f};b.XModelContainerUtils.releaseTextures=function(a){if(null!=a){for(var g=0;g<a.num_textures;++g){var c=a.textures[g];null!=c&&(c.data=null,c.data_size=0)}for(g=0;g<a.num_materials;++g)b.XModelMaterialUtils.releaseTexture(a.materials[g]);for(g=0;g<a.num_meshes;++g)b.XModelMeshUtils.releaseTextures(a.meshes[g]);for(g=0;g<a.num_nodes;++g)b.XModelNodeUtils.releaseTextures(a.nodes[g])}};b.XModelContainerUtils.getMeshes=function(a,g,c,d){var f=0;if(null!=a){for(var e=0;e<
a.num_meshes;++e){var h=a.meshes[e];null!=h&&(null!=g&&0<d&&(g[c++]=h,d--),f++)}for(e=0;e<a.num_nodes;++e)h=b.XModelNodeUtils.getMeshes(node,g,c,d),c+=h,d-=h,f+=h}return f};b.XModelContainerUtils.releaseShapes=function(a){if(null!=a){for(var g=0;g<a.num_meshes;++g)b.XModelMeshUtils.releaseShape(a.meshes[g]);for(g=0;g<a.num_nodes;++g)b.XModelNodeUtils.releaseShapes(a.nodes[g])}};b.XModelContainerUtils.getNodes=function(a,g,c,d){var f=0;if(null!=a)for(var e=0;e<a.num_nodes;++e){var h=b.XModelNodeUtils.getNodes(a.nodes[e],
g,c,d);c+=h;d-=h;f+=h}return f};b.XModelContainerUtils.updateParent=function(a){if(null!=a){for(var g=0;g<a.num_meshes;++g){var c=a.meshes[g];null!=c&&(c.parent=null)}for(g=0;g<a.num_nodes;++g)b.XModelNodeUtils.updateParent(a.nodes[g],null)}};b.XModelContainerUtils.updateCombinationp=function(a,g,c,d,f,e,h,l,k,m,n,p,q,r,t,v,u){if(null!=a)for(var y=0;y<a.num_nodes;++y)b.XModelNodeUtils.updateCombinationAllp(a.nodes[y],g,c,d,f,e,h,l,k,m,n,p,q,r,t,v,u)};b.XModelContainerUtils.updateCombinationv=function(a,
g,c){if(null!=a)for(var d=0;d<a.num_nodes;++d)b.XModelNodeUtils.updateCombinationAllv(a.nodes[d],g,c)};b.XModelContainerUtils.updateCombination=function(a){if(null!=a)for(var g=0;g<a.num_nodes;++g)b.XModelNodeUtils.updateCombinationAll(a.nodes[g])};b.XModelContainerUtils.updateOffset=function(a){if(null!=a)for(var g=0;g<a.num_nodes;++g)b.XModelNodeUtils.updateOffset(a.nodes[g])};b.XModelContainerUtils.setAnimation=function(a,g,c,d){if(null!=a&&0<=g&&g<a.num_animation_sets){g=a.animation_sets[g];var f=
b.XModelAnimationUtils.getAnimationSetTotalTime(g);c*=a.time_rate;0<f&&d?c%=f:b.MathUtils.mid(0,f,c);b.XModelAnimationUtils.setAnimationSet(g,c)}};b.XModelContainerUtils.getAnimationTotalTime=function(a,g){return null!=a&&0<=g&&g<a.num_animation_sets?b.XModelAnimationUtils.getAnimationSetTotalTime(a.animation_sets[g])/a.time_rate:0};b.XModelContainerUtils.applyKinematics=function(a){if(null!=a)for(var g=0;g<a.num_nodes;++g)b.XModelNodeUtils.applyKinematics(a.nodes[g])};b.XModelContainerUtils.resetTransforms=
function(a){if(null!=a)for(var g=0;g<a.num_nodes;++g)b.XModelNodeUtils.resetTransforms(a.nodes[g])};b.XModelContainerUtils.resetOffset=function(a){b.XModelContainerUtils.resetTransforms(a);b.XModelContainerUtils.updateCombination(a);b.XModelContainerUtils.updateOffset(a)};b.XModelContainerUtils.forEachMesh=function(a,g,c){if(null!=a){for(var d=0;d<a.num_meshes;++d){var f=a.meshes[d];null!=f&&g(f,c)}for(d=0;d<a.num_nodes;++d)b.XModelNodeUtils.forEachMesh(a.nodes[d],g,c)}};b.XModelContainerUtils.forEachNode=
function(a,g,c){if(null!=a)for(var d=0;d<a.num_nodes;++d)b.XModelNodeUtils.forEachNode(a.nodes[d],g,0,c)}})(xpl);(function(b){b.XModelOptimizeUtils=function(){throw Error("Unsupported operation");};b.XModelOptimizeUtils.optimizeMeshVertices=function(a){};b.XModelOptimizeUtils.optimizeMeshElements=function(a){};var a=function(){this.bones=[];this.vertices=[];this.elements=[]};a.prototype.addBone=function(a){var c=b.ArrayUtils.binarySearch(this.bones,0,this.bones.length,a);0>c&&this.bones.splice(-c-1,0,a)};a.prototype.addVertex=function(a){var c=b.ArrayUtils.binarySearch(this.vertices,0,this.vertices.length,a);
0>c&&this.vertices.splice(-c-1,0,a)};a.prototype.addElement=function(a){var c=b.ArrayUtils.binarySearch(this.elements,0,this.elements.length,a);0>c&&this.elements.splice(-c-1,0,a)};a.prototype.merge=function(a,b,d,f){if(b)for(b=0;b<a.bones.length;++b)this.addBone(a.bones[b]);if(d)for(d=0;d<a.vertices.length;++d)this.addVertex(a.vertices[d]);if(f)for(f=0;f<a.elements.length;++f)this.addElement(a.elements[f])};b.XModelOptimizeUtils.optimizeMeshSkinForMatrixPallet=function(g,c){if(null!=g&&null!=g.skin&&
c<g.skin.num_nodes){if(void 0===c||16>c)c=16;for(var d={},f=0;f<g.num_elements;++f){var e=new a;e.addElement(f);for(var h=g.elements[f],l=0;l<h.num_vertices;++l){var k=h.vertices[l];e.addVertex(k);for(var m=g.vertices[k],k=g.skin.weighted_index_stride*m.skinning,m=g.skin.weighted_index_sizes[m.skinning],n=0;n<m;++n)e.addBone(g.skin.indices[k+n])}h="["+e.bones.toString()+"]";void 0!==d[h]?d[h].merge(e,!1,!0,!0):d[h]=e}var f=[],p;for(p in d)f.push(d[p]);f.sort(function(a,b){return b.bones.length-a.bones.length});
for(d=f.length-1;0<=d;--d)for(p=f[d],e=0;e<d;++e)if(h=f[e],b.ArrayUtils.isContained(h.bones,0,h.bones.length,p.bones,0,p.bones.length)){h.merge(p,!1,!0,!0);delete f[d];break}f=f.filter(function(a){return void 0!==a});console.log(f.length);for(d=0;d<f.length-1;++d)if(p=f[d],void 0!==p&&p.bones.length<=c)for(e=d+1;e<f.length&&p.bones.length<c;++e)h=f[e],void 0!==h&&p.bones.length+h.bones.length<=c&&(p.merge(h,!0,!0,!0),delete f[e]);f=f.filter(function(a){return void 0!==a});console.log(f.length);g.num_subsets=
f.length;g.subsets=Array(g.num_subsets);for(d=0;d<g.num_subsets;++d)for(p=f[d],e=new b.XModelMeshSubset,g.subsets[d]=e,e.num_bones=p.bones.length,e.bones=new Uint16Array(p.bones),e.num_vertices=p.vertices.length,e.vertices=new Uint32Array(p.vertices),e.num_elements=p.elements.length,e.elements=Array(e.num_elements),h=0;h<p.elements.length;++h)for(l=g.elements[p.elements[h]],k=new b.XModelElement,e.elements[h]=k,k.material=l.material,k.num_vertices=l.num_vertices,k.vertices=new Uint32Array(k.num_vertices),
m=0;m<k.num_vertices;++m)n=b.ArrayUtils.binarySearch(e.vertices,0,e.num_vertices,l.vertices[m]),k.vertices[m]=0<=n?n:0}};b.XModelOptimizeUtils.optimizeMeshSkinForWeightedIndices=function(a,b){}})(xpl);(function(b){b.XModelWrapper=function(){this._container=null;this.__prev_anim_index=-1;this.__min_bounds=new Float32Array([Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE]);this.__max_bounds=new Float32Array([-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE]);this.__is_canseled=this.__is_completed=!1};Object.defineProperties(b.XModelWrapper.prototype,{container:{get:function(){return this._container}},isCompleted:{get:function(){return this.__is_completed}},isCanceled:{get:function(){return this.__is_canseled}},
numAnimationSets:{get:function(){return null!=this._container?this._container.num_animation_sets:0}}});b.XModelWrapper.prototype._complete=function(){this.__is_completed=!0;b.XModelContainerUtils.forEachMesh(this._container,function(a,b){for(var c=0;c<a.num_positions;++c)for(var d=0;d<a.position_size;++d){var f=a.positions[a.position_size*c+d];this.__min_bounds[d]=Math.min(this.__min_bounds[d],f);this.__max_bounds[d]=Math.max(this.__max_bounds[d],f)}}.bind(this),null)};b.XModelWrapper.prototype.cancel=
function(){this.__is_canseled=!0};b.XModelWrapper.prototype.getMinBound=function(a){return this.__min_bounds[a]};b.XModelWrapper.prototype.getMaxBound=function(a){return this.__max_bounds[a]};b.XModelWrapper.prototype.getSize=function(a){return this.__max_bounds[a]-this.__min_bounds[a]};b.XModelWrapper.prototype.getCenter=function(a){return.5*(this.__min_bounds[a]+this.__max_bounds[a])};b.XModelWrapper.prototype.resetPose=function(){b.XModelContainerUtils.resetTransforms(this._container);b.XModelContainerUtils.updateCombination(this._container)};
b.XModelWrapper.prototype.setAnimation=function(a,g,c,d){void 0==c&&(c=!1);void 0==d&&(d=!1);this.__prev_anim_index!=a?(this.__prev_anim_index=a,this.resetPose()):b.XModelContainerUtils.resetTransforms(this._container);b.XModelContainerUtils.setAnimation(this._container,a,g,c);d&&b.XModelContainerUtils.applyKinematics(this._container);b.XModelContainerUtils.updateCombination(this._container)};b.XModelWrapper.prototype.dispose=function(){this.cancel();this.__is_completed=!1}})(xpl);
(function(b){b.XModelWrapperGL=function(){b.XModelWrapper.call(this);this.__white_texture=this.__config=null;this.__remain_textures=0;this.__is_update_anim=!1;this.__subset_matrix_pallet=this.__matrix_pallet=null};Object.setPrototypeOf(b.XModelWrapperGL.prototype,b.XModelWrapper.prototype);Object.defineProperties(b.XModelWrapperGL,{CONFIG_MEMORY_ALIGNMENT_SIZE:{value:"memory_alignment_size"},CONFIG_USE_VERTEX_ARRAY_OBJECT:{value:"use_vertex_array_object"},CONFIG_USE_MIPMAP_TEXTURE:{value:"use_mipmap_texture"},
CONFIG_USE_SKINNING:{value:"use_skinning"},CONFIG_GPU_SKINNING:{value:"gpu_skinning"},CONFIG_MAX_BONE_WEIGHTED_INDICES:{value:"max_bone_weighted_indices"},CONFIG_MAX_BONE_MATRICES:{value:"max_bone_matrices"},CONFIG_PATH_ALIAS:{value:"path_alias"},CONFIG_USE_MORFING:{value:"use_mofing"},CONFIG_GPU_MORFING:{value:"gpu_morfing"},UNIFORM_DIFFUSE:{value:"u_diffuse"},UNIFORM_DIFFUSE_MAP:{value:"u_diffuse_map"},UNIFORM_SPECULAR:{value:"u_specular"},UNIFORM_SPECULAR_MAP:{value:"u_specular_map"},UNIFORM_BONE_MATRICES:{value:"u_bone_matrices"},
UNIFORM_MAX_BONES:{value:"u_max_bones"},ATTRIBUTE_POSITION:{value:"a_position"},ATTRIBUTE_NORMAL:{value:"a_normal"},ATTRIBUTE_COLOR:{value:"a_color"},ATTRIBUTE_TEXCOORD:{value:"a_tex_coord"},ATTRIBUTE_BONEINDICES:{value:"a_bone_indices"},ATTRIBUTE_BONEWEIGHTS:{value:"a_bone_weights"}});var a=b.XModelWrapperGL;b.XModelWrapperGL.defaultConfig=function(){var b={};b[a.CONFIG_MEMORY_ALIGNMENT_SIZE]=4;b[a.CONFIG_USE_VERTEX_ARRAY_OBJECT]=!1;b[a.CONFIG_USE_MIPMAP_TEXTURE]=!1;b[a.CONFIG_USE_SKINNING]=!1;b[a.CONFIG_GPU_SKINNING]=
!1;b[a.CONFIG_MAX_BONE_MATRICES]=16;b[a.CONFIG_MAX_BONE_WEIGHTED_INDICES]=4;b[a.CONFIG_USE_MORFING]=!1;b[a.CONFIG_GPU_MORFING]=!1;b[a.CONFIG_PATH_ALIAS]=null;return b};b.XModelWrapperGL.copyConfig=function(b){for(var c={},e=$jscomp.makeIterator([a.CONFIG_MEMORY_ALIGNMENT_SIZE,a.CONFIG_USE_VERTEX_ARRAY_OBJECT,a.CONFIG_USE_MIPMAP_TEXTURE,a.CONFIG_USE_SKINNING,a.CONFIG_GPU_SKINNING,a.CONFIG_MAX_BONE_MATRICES,a.CONFIG_MAX_BONE_WEIGHTED_INDICES,a.CONFIG_USE_MORFING,a.CONFIG_GPU_MORFING,a.CONFIG_PATH_ALIAS]),
g=e.next();!g.done;g=e.next())g=g.value,c[g]=b[g];return c};b.XModelWrapperGL.defaultUniforms=function(){var b={};b[a.UNIFORM_DIFFUSE]=null;b[a.UNIFORM_DIFFUSE_MAP]=null;b[a.UNIFORM_BONE_MATRICES]=null;b[a.UNIFORM_MAX_BONES]=null;return b};b.XModelWrapperGL.defaultAttributes=function(){var b={};b[a.ATTRIBUTE_POSITION]=-1;b[a.ATTRIBUTE_NORMAL]=-1;b[a.ATTRIBUTE_COLOR]=-1;b[a.ATTRIBUTE_TEXCOORD]=-1;b[a.ATTRIBUTE_BONEINDICES]=-1;b[a.ATTRIBUTE_BONEWEIGHTS]=-1;return b};var g=function(d,f,e,g,l){if(null==
f.getExtension("OES_element_index_uint"))throw Error("Required the OES_element_index_uint");null==g&&(g="");var k=0,m=new XMLHttpRequest;m.open("GET",g+e,!0);m.responseType="arraybuffer";m.onload=function(d){if(!this.isCanceled)if(200==d.target.status)if(this._container=(new b.XModelDecoder).decode(d.target.response),null!=this._container){b.XModelContainerUtils.forEachMesh(this._container,function(c,d){var e=l[a.CONFIG_USE_SKINNING]&&null!=c.skin&&0<c.skin.num_nodes,f=!l[a.CONFIG_GPU_SKINNING]&&
e,g=l[a.CONFIG_GPU_SKINNING]&&e,h=!e||g,m,n,p,E;g?(m=2,n=4,p=b.XModelMeshUtils.TYPE_UNSIGNED_SHORT,E=b.XModelMeshUtils.TYPE_FLOAT):(n=m=0,E=p=b.XModelMeshUtils.TYPE_VOID);g&&b.XModelOptimizeUtils.optimizeMeshSkinForMatrixPallet(c,l[a.CONFIG_MAX_BONE_MATRICES]);e=function(e){var g=-1==e?c:c.subsets[e],k=new Int32Array(b.XModelMeshUtils.MAX_ATTRIBUTE),t=b.XModelMeshUtils.getVerticesSize(c,h,l[a.CONFIG_MEMORY_ALIGNMENT_SIZE],4,4,1,4,0,m,n,k,0,e),t=new ArrayBuffer(t);b.XModelMeshUtils.getVertices(c,b.XModelMeshUtils.TYPE_FLOAT,
b.XModelMeshUtils.TYPE_FLOAT,b.XModelMeshUtils.TYPE_UNSIGNED_BYTE,b.XModelMeshUtils.TYPE_FLOAT,b.XModelMeshUtils.TYPE_VOID,p,E,k,0,t,0,e);var u,I,J,B,M,G,K,z;f?(z=new Int32Array(b.XModelMeshUtils.MAX_ATTRIBUTE),u=b.XModelMeshUtils.getVerticesSize(c,!1,l[a.CONFIG_MEMORY_ALIGNMENT_SIZE],4,4,0,0,0,2,4,z,0,e),u=new ArrayBuffer(u),I=new Float32Array(u,z[b.XModelMeshUtils.ATTRIBUTE_POSITION]),J=new Float32Array(u,z[b.XModelMeshUtils.ATTRIBUTE_NORMAL]),B=new Uint16Array(u,z[b.XModelMeshUtils.ATTRIBUTE_BONEINDICES]),
M=new Float32Array(u,z[b.XModelMeshUtils.ATTRIBUTE_BONEWEIGHTS]),b.XModelMeshUtils.getVertices(c,b.XModelMeshUtils.TYPE_FLOAT,b.XModelMeshUtils.TYPE_FLOAT,b.XModelMeshUtils.TYPE_VOID,b.XModelMeshUtils.TYPE_VOID,b.XModelMeshUtils.TYPE_VOID,b.XModelMeshUtils.TYPE_UNSIGNED_SHORT,b.XModelMeshUtils.TYPE_FLOAT,z,0,u,0,e),G=new ArrayBuffer(z[b.XModelMeshUtils.ATTRIBUTE_BONEINDICES]),K=new Float32Array(G,z[b.XModelMeshUtils.ATTRIBUTE_POSITION]),z=new Float32Array(G,z[b.XModelMeshUtils.ATTRIBUTE_NORMAL])):
z=K=G=M=B=J=I=u=null;var R=new Int32Array(c.num_materials+1),U=new Uint32Array(c.num_materials+1),N=b.XModelMeshUtils.getNumAllTriangledFaceIndices(c,R,0,U,0,e),N=new Uint32Array(N);b.XModelMeshUtils.getAllTriangledFaceIndices(c,!0,R,0,N,0,e);g.vertex_buffer=b.GLUtils.createBuffer(d,d.ARRAY_BUFFER,t,f?d.STREAM_DRAW:d.STATIC_DRAW);g.element_buffer=b.GLUtils.createBuffer(d,d.ELEMENT_ARRAY_BUFFER,N.buffer,d.STATIC_DRAW);g.user_object={vertices_offsets:k,src_vertices:u,src_positions:I,src_normals:J,src_bone_indices:B,
src_bone_weights:M,dest_vertices:G,dest_positions:K,dest_normals:z,elements_offsets:R,elements_sizes:U}};if(null!=c.subsets&&0<c.num_subsets)for(g=0;g<c.num_subsets;++g)e(g);else e(-1);null!=c.skin&&(k=Math.max(c.skin.num_nodes,k))},f);0<k&&(this.__matrix_pallet=new Float32Array(b.Geometry.SIZE_MATRIX_4X4*k),this.__subset_matrix_pallet=new Float32Array(Math.max(b.Geometry.SIZE_MATRIX_4X4*k,b.Geometry.SIZE_MATRIX_4X4*l[a.CONFIG_MAX_BONE_MATRICES])),this.resetPose());var e=b.XModelContainerUtils.getTextures(this._container,
null,0,0);d=Array(e);b.XModelContainerUtils.getTextures(this._container,d,0,e);d=b.ArrayUtils.convertToSet(d,0,d.length,function(a,b){return a.name==b.name});this.__remain_textures=d.length;for(e=0;e<d.length;++e)c(this,f,d[e],g,l);0>=this.__remain_textures&&this._complete()}else this.cancel();else this.cancel()}.bind(d);m.send()},c=function(c,f,e,g,l){var k=new XMLHttpRequest;null!=l[a.CONFIG_PATH_ALIAS]&&null!=l[a.CONFIG_PATH_ALIAS][e.ref]?k.open("GET",l[a.CONFIG_PATH_ALIAS][e.ref],!0):k.open("GET",
g+e.ref,!0);k.responseType="blob";k.onload=function(g){if(!c.isCanceled){if(200==g.target.status){g=g.target.response;var h=new Image;h.onload=function(){e.texture=b.GLUtils.createTexture2DFromImage(f,f.RGBA,f.UNSIGNED_BYTE,h);f.bindTexture(f.TEXTURE_2D,e.texture);l[a.CONFIG_USE_MIPMAP_TEXTURE]&&f.generateMipmap(f.TEXTURE_2D);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.MIRRORED_REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.MIRRORED_REPEAT);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,
f.LINEAR);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR)};h.src=URL.createObjectURL(g)}this.__remain_textures--;0>=this.__remain_textures&&this._complete()}}.bind(c);k.send()};b.XModelWrapperGL.prototype.initializeWithUrl=function(a,c,e,h){this.__white_texture=b.GLUtils.createTexture2D(a,a.RGBA,a.UNSIGNED_BYTE,1,1,new Uint8Array([255,255,255,255]),!1,null,0);this.__config=b.XModelWrapperGL.copyConfig(h);g(this,a,c,e,this.__config)};b.XModelWrapperGL.prototype.setAnimation=function(a,
c,e,g){b.XModelWrapper.prototype.setAnimation.call(this,a,c,e,g);this.__is_update_anim=!0};b.XModelWrapperGL.prototype._complete=function(){b.XModelWrapper.prototype._complete.call(this);b.XModelContainerUtils.releaseShapes(this._container)};b.XModelWrapperGL.prototype.draw=function(c,f,e){b.XModelContainerUtils.forEachMesh(this._container,function(c,d){var g=this.__config[a.CONFIG_USE_SKINNING],m=this.__config[a.CONFIG_GPU_SKINNING];null!=c.skin&&g&&b.XModelSkinUtils.updateMatrixPallet(c.skin,c.skin.num_nodes,
this.__matrix_pallet,0);var n=function(n){var p,t;-1==n?(p=null,t=c):t=p=c.subsets[n];var v=-1==n?c:c.subsets[n];d.bindBuffer(d.ARRAY_BUFFER,v.vertex_buffer);var u=v.user_object.vertices_offsets[b.XModelMeshUtils.ATTRIBUTE_STRUCTURE_SIZE],y=v.user_object.vertices_offsets[b.XModelMeshUtils.ATTRIBUTE_POSITION];-1!=e.a_position&&-1!=y&&(d.enableVertexAttribArray(e.a_position),d.vertexAttribPointer(e.a_position,c.position_size,d.FLOAT,!1,u,y));y=v.user_object.vertices_offsets[b.XModelMeshUtils.ATTRIBUTE_NORMAL];
-1!=e.a_normal&&-1!=y&&(d.enableVertexAttribArray(e.a_normal),d.vertexAttribPointer(e.a_normal,c.normal_size,d.FLOAT,!1,u,y));y=v.user_object.vertices_offsets[b.XModelMeshUtils.ATTRIBUTE_COLOR];-1!=e.a_color&&-1!=y&&(d.enableVertexAttribArray(e.a_color),d.vertexAttribPointer(e.a_color,c.color_size,d.UNSIGNED_BYTE,!1,u,y));y=v.user_object.vertices_offsets[b.XModelMeshUtils.ATTRIBUTE_TEXCOORD];-1!=e.a_tex_coord&&-1!=y&&(d.enableVertexAttribArray(e.a_tex_coord),d.vertexAttribPointer(e.a_tex_coord,c.tex_coord_size,
d.FLOAT,!1,u,y));null!=c.skin&&this.__config[a.CONFIG_USE_SKINNING]&&(y=v.user_object.vertices_offsets[b.XModelMeshUtils.ATTRIBUTE_BONEINDICES],-1!=e.a_bone_indices&&-1!=y&&(d.enableVertexAttribArray(e.a_bone_indices),d.vertexAttribPointer(e.a_bone_indices,c.skin.weighted_index_stride,d.UNSIGNED_SHORT,!1,u,y)),v=v.user_object.vertices_offsets[b.XModelMeshUtils.ATTRIBUTE_BONEWEIGHTS],-1!=e.a_bone_weights&&-1!=v&&(d.enableVertexAttribArray(e.a_bone_weights),d.vertexAttribPointer(e.a_bone_weights,c.skin.weighted_index_stride,
d.FLOAT,!1,u,v)));if(g&&null!=c.skin)if(m){if(null!=f.u_bone_matrices)if(null!=f.u_max_bones&&d.uniform1i(f.u_max_bones,c.skin.weighted_index_stride),-1==n)d.uniformMatrix4fv(f.u_bone_matrices,!1,this.__matrix_pallet);else{for(u=0;u<p.num_bones;++u)b.Matrix4x4.loadv(this.__subset_matrix_pallet,b.Geometry.SIZE_MATRIX_4X4*u,this.__matrix_pallet,b.Geometry.SIZE_MATRIX_4X4*p.bones[u],!1);d.uniformMatrix4fv(f.u_bone_matrices,!1,this.__subset_matrix_pallet)}}else{if(this.__is_update_anim){null!=f.u_max_bones&&
d.uniform1i(f.u_max_bones,0);-1!=c.user_object.vertices_offsets[b.XModelMeshUtils.ATTRIBUTE_POSITION]&&b.XModelSkinUtils.updatePositions(this.__matrix_pallet,0,t.num_vertices,t.user_object.src_positions,0,0,t.user_object.dest_positions,0,0,t.skin.weighted_index_stride,t.user_object.src_bone_indices,0,0,t.user_object.src_bone_weights,0,0);if(-1!=t.user_object.vertices_offsets[b.XModelMeshUtils.ATTRIBUTE_NORMAL]){for(u=0;u<c.skin.num_nodes;++u)p=b.Geometry.SIZE_MATRIX_4X4*u,b.Matrix4x4.loadAxisv(this.__matrix_pallet,
p,this.__matrix_pallet,p,!1),b.Matrix4x4.normalizeAxisv(this.__matrix_pallet,p,this.__matrix_pallet,p,!0);b.XModelSkinUtils.updateNormals(this.__matrix_pallet,0,t.num_vertices,t.user_object.src_normals,0,0,t.user_object.dest_normals,0,0,t.skin.weighted_index_stride,t.user_object.src_bone_indices,0,0,t.user_object.src_bone_weights,0,0)}d.bufferSubData(d.ARRAY_BUFFER,0,t.user_object.dest_vertices);this.__is_update_anim=!1}}else null!=f.u_max_bones&&d.uniform1i(f.u_max_bones,0);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,
t.element_buffer);for(u=0;u<c.num_materials;++u)p=c.materials[u],v=t.user_object.elements_sizes[u],0<v&&(null!=f.u_ambient_map?(d.activeTexture(d.TEXTURE1),d.uniform1i(f.u_ambient_map,1),null!=p.ambient_map&&null!=p.ambient_map.texture?(d.uniform4fv(f.u_ambient_map,p.ambient),d.bindTexture(d.TEXTURE_2D,p.ambient_map.texture)):(d.uniform4f(f.u_ambient_color,1,1,1,1),d.bindTexture(d.TEXTURE_2D,this.__white_texture))):null!=f.u_ambient_color&&d.uniform4f(f.u_ambient_color,1,1,1,1),null!=f.u_diffuse_map?
(d.activeTexture(d.TEXTURE0),d.uniform1i(f.u_diffuse_map,0),null!=p.diffuse_map&&null!=p.diffuse_map.texture?(d.uniform4fv(f.u_diffuse_color,p.diffuse),d.bindTexture(d.TEXTURE_2D,p.diffuse_map.texture)):(d.uniform4f(f.u_diffuse_color,1,1,1,1),d.bindTexture(d.TEXTURE_2D,this.__white_texture))):null!=f.u_diffuse_color&&d.uniform4f(f.u_diffuse_color,1,1,1,1),null!=f.u_specular_map?(d.activeTexture(d.TEXTURE1),d.uniform1i(f.u_specular_map,2),null!=p.specular_map&&null!=p.specular_map.texture?(d.uniform4fv(f.u_specular_map,
p.specular),d.bindTexture(d.TEXTURE_2D,p.specular_map.texture)):(d.uniform4f(f.u_specular_color,1,1,1,1),d.bindTexture(d.TEXTURE_2D,this.__white_texture))):null!=f.u_specular_color&&d.uniform4f(f.u_specular_color,1,1,1,1),null!=f.u_bump_map?(d.activeTexture(d.TEXTURE1),d.uniform1i(f.u_bump_map,3),null!=p.bump_map&&null!=p.bump_map.texture?(d.uniform4fv(f.u_bump_map,p.bump),d.bindTexture(d.TEXTURE_2D,p.bump_map.texture)):(d.uniform4f(f.u_bump_color,.5,.5,.5,1),d.bindTexture(d.TEXTURE_2D,this.__white_texture))):
null!=f.u_bump_color&&d.uniform4f(f.u_bump_color,1,1,1,1),d.drawElements(d.TRIANGLES,v,d.UNSIGNED_INT,4*t.user_object.elements_offsets[u]));d.bindBuffer(d.ARRAY_BUFFER,(-1==n?c:c.subsets[n]).vertex_buffer);-1!=e.a_position&&d.disableVertexAttribArray(e.a_position);-1!=e.a_normal&&d.disableVertexAttribArray(e.a_normal);-1!=e.a_color&&d.disableVertexAttribArray(e.a_color);-1!=e.a_tex_coord&&d.disableVertexAttribArray(e.a_tex_coord);-1!=e.a_bone_indices&&d.disableVertexAttribArray(e.a_bone_indices);
-1!=e.a_bone_weights&&d.disableVertexAttribArray(e.a_bone_weights)}.bind(this);if(null!=c.subsets&&0<c.num_subsets)for(var p=0;p<c.num_subsets;++p)n(p);else n(-1)}.bind(this),c)};b.XModelWrapperGL.prototype.dispose=function(a){b.XModelWrapper.prototype.dispose.call(this);b.XModelContainerUtils.forEachMesh(this._container,function(a,b){null!=a.vertex_buffer&&(b.deleteBuffer(a.vertex_buffer),a.vertex_buffer=null);null!=a.element_buffer&&(b.deleteBuffer(a.element_buffer),a.element_buffer=null)},a);a.deleteTexture(this.__white_texture);
for(var c=b.XModelContainerUtils.getTextures(this._container,null,0,0),e=Array(c),g=0;g<c;++g){var l=e[g];null!=l&&(a.deleteTexture(l.texture),l.texture=null)}}})(xpl);
